<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><style>.bespoke-marp-note,.bespoke-marp-osc,.bespoke-progress-parent{display:none;transition:none}@media screen{body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border:0;color:inherit;cursor:pointer;font-size:inherit;opacity:.8;outline:none;padding:0;transition:opacity .2s linear;-webkit-tap-highlight-color:transparent}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:disabled,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:disabled{cursor:not-allowed;opacity:.15!important}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover{opacity:1}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:active,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:active{opacity:.6}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button:hover:not(:disabled),body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button:hover:not(:disabled){transition:none}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-prev{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNNjggOTBMMjggNTBsNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button.bespoke-marp-presenter-info-page-next{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSI1IiBkPSJNMzIgOTBsNDAtNDAtNDAtNDAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTQwIDcwSDIwVjUwbTIwIDBMMjAgNzBtNDAtNDBoMjB2MjBtLTIwIDBsMjAtMjAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button.exit[data-bespoke-marp-osc=fullscreen]{background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NXB4fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJhIiB4PSIxMCIgeT0iMjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUuNjciLz48cGF0aCBjbGFzcz0iYSIgZD0iTTIwIDUwaDIwdjIwbS0yMCAwbDIwLTIwbTQwIDBINjBWMzBtMjAgMEw2MCA1MCIvPjwvc3ZnPg==")}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter]{background:transparent url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmF7ZmlsbDpub25lO3N0cm9rZTojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS13aWR0aDo1cHh9PC9zdHlsZT48L2RlZnM+PHBhdGggY2xhc3M9ImEiIGQ9Ik0yMCA2MGgtNWE1IDUgMCAwMS01LTVWMjBhNSA1IDAgMDE1LTVoNjBhNSA1IDAgMDE1IDV2NU0zMCA4NWg2MCIvPjxyZWN0IHg9IjMwIiB5PSIzNSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQwIiByeD0iNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIi8+PHJlY3QgY2xhc3M9ImEiIHg9IjMwIiB5PSIzNSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQwIiByeD0iNSIvPjxwYXRoIGNsYXNzPSJhIiBkPSJNNDAgNTBoNDBNNDAgNjBoMzAiLz48L3N2Zz4=") no-repeat 50%;background-size:contain;overflow:hidden;text-indent:100%;white-space:nowrap}body,html{height:100%;margin:0}body{background:#000;overflow:hidden}svg.bespoke-marp-slide{content-visibility:hidden;z-index:-1;pointer-events:none;opacity:0}svg.bespoke-marp-slide.bespoke-marp-active{content-visibility:visible;z-index:0;pointer-events:auto;opacity:1}svg.bespoke-marp-slide.bespoke-marp-active.bespoke-marp-active-ready *{-webkit-animation-name:__bespoke_marp__!important;animation-name:__bespoke_marp__!important}@supports not (content-visibility:hidden){svg.bespoke-marp-slide[data-bespoke-marp-load=hideable]{display:none}svg.bespoke-marp-slide[data-bespoke-marp-load=hideable].bespoke-marp-active{display:block}}[data-bespoke-marp-fragment=inactive]{visibility:hidden}body[data-bespoke-view=""] .bespoke-marp-parent,body[data-bespoke-view=next] .bespoke-marp-parent{bottom:0;left:0;position:absolute;right:0;top:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc{background:rgba(0,0,0,.65);border-radius:7px;bottom:50px;color:#fff;display:block;font-family:Helvetica,Arial,sans-serif;font-size:16px;left:50%;line-height:0;opacity:1;padding:12px;position:absolute;touch-action:manipulation;transform:translateX(-50%);transition:opacity .2s linear;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;z-index:1;will-change:transform}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>*,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>*{margin-left:6px}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>:first-child,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>:first-child{margin-left:0}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span,body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span{opacity:.8}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>span[data-bespoke-marp-osc=page]{display:inline-block;min-width:140px;text-align:center}body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=""] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=fullscreen],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=next],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=presenter],body[data-bespoke-view=next] .bespoke-marp-parent>.bespoke-marp-osc>button[data-bespoke-marp-osc=prev]{height:32px;line-height:32px;width:32px}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive{cursor:none}body[data-bespoke-view=""] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc,body[data-bespoke-view=next] .bespoke-marp-parent.bespoke-marp-inactive>.bespoke-marp-osc{opacity:0;pointer-events:none}body[data-bespoke-view=""] svg.bespoke-marp-slide,body[data-bespoke-view=next] svg.bespoke-marp-slide{height:100%;left:0;position:absolute;top:0;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent{background:#222;display:flex;height:5px;width:100%}body[data-bespoke-view=""] .bespoke-progress-parent+.bespoke-marp-parent{top:5px}body[data-bespoke-view=""] .bespoke-progress-parent .bespoke-progress-bar{flex:0 0 0;background:#0288d1;transition:flex-basis .2s cubic-bezier(0,1,1,1)}body[data-bespoke-view=next]{background:transparent}body[data-bespoke-view=presenter]{background:#161616}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container{font-family:Helvetica,Arial,sans-serif;height:100%;left:0;position:absolute;top:0;width:100%;display:grid;grid-template-columns:2fr 1fr;grid-template-rows:minmax(140px,1fr) 2fr 3em;grid-template-areas:"current next" "current note" "info    note"}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent{grid-area:current;position:relative;overflow:hidden}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide{height:calc(100% - 40px);left:20px;position:absolute;pointer-events:none;top:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-parent svg.bespoke-marp-slide.bespoke-marp-active{filter:drop-shadow(0 3px 10px rgba(0,0,0,.5))}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container{background:#222;cursor:pointer;display:none;grid-area:next;overflow:hidden;position:relative}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-next-container iframe.bespoke-marp-presenter-next{background:transparent;border:0;display:block;filter:drop-shadow(0 3px 10px rgba(0,0,0,.5));height:calc(100% - 40px);left:20px;position:absolute;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;top:20px;width:calc(100% - 40px)}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container{background:#222;color:#eee;grid-area:note}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note{margin:20px;width:calc(100% - 40px);height:calc(100% - 40px);box-sizing:border-box;font-size:1.1em;overflow:auto;padding-right:3px;white-space:pre-wrap;word-wrap:break-word;scrollbar-width:thin;scrollbar-color:hsla(0,0%,93.3%,.5) transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar{width:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-track{background:transparent}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note::-webkit-scrollbar-thumb{background:hsla(0,0%,93.3%,.5);border-radius:6px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note:empty{pointer-events:none}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note.active{display:block}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:first-child{margin-top:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-note-container .bespoke-marp-note p:last-child{margin-bottom:0}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container{align-items:center;box-sizing:border-box;color:#eee;display:flex;flex-wrap:nowrap;grid-area:info;justify-content:center;padding:0 10px}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time,body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{display:block;box-sizing:border-box;padding:0 10px;white-space:nowrap;width:100%}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container button{height:1.5em;line-height:1.5em;width:1.5em}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page{order:2;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-page .bespoke-marp-presenter-info-page-text{display:inline-block;min-width:120px;text-align:center}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-time{color:#999;order:1;text-align:left}body[data-bespoke-view=presenter] .bespoke-marp-presenter-container .bespoke-marp-presenter-info-container .bespoke-marp-presenter-info-timer{color:#999;order:3;text-align:right}}@media print{.bespoke-marp-presenter-info-container,.bespoke-marp-presenter-next-container,.bespoke-marp-presenter-note-container{display:none}}</style><style>@charset "UTF-8";@import url("https://fonts.googleapis.com/css?family=Lato:400,900|Roboto+Mono:400,700&display=swap");div#p>svg>foreignObject>section{width:1280px;height:720px;box-sizing:border-box;overflow:hidden;position:relative;scroll-snap-align:center center}div#p>svg>foreignObject>section:after{bottom:0;content:attr(data-marpit-pagination);padding:inherit;pointer-events:none;position:absolute;right:0}div#p>svg>foreignObject>section:not([data-marpit-pagination]):after{display:none}/* Normalization */div#p>svg>foreignObject>section h1{font-size:2em;margin:0.67em 0}div#p>svg>foreignObject>section video::-webkit-media-controls{will-change:transform}@page{size:1280px 720px;margin:0}@media print{body,html{background-color:#fff;margin:0;page-break-inside:avoid;break-inside:avoid-page}div#p>svg>foreignObject>section{page-break-before:always;break-before:page}div#p>svg>foreignObject>section,div#p>svg>foreignObject>section *{-webkit-print-color-adjust:exact!important;animation-delay:0s!important;animation-duration:0s!important;color-adjust:exact!important;transition:none!important}div#p>svg[data-marpit-svg]{display:block;height:100vh;width:100vw}}div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{display:block;height:auto;width:100%}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{position:static}}div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{content:""}@supports (-ms-ime-align:auto){div#p>svg>foreignObject>section svg[data-marp-fitting=svg].__reflow__{position:relative}}div#p>svg>foreignObject>section [data-marp-fitting-svg-content]{display:table;white-space:nowrap}div#p>svg>foreignObject>section [data-marp-fitting-svg-content-wrap]{white-space:pre}div#p>svg>foreignObject>section img[data-marp-twemoji]{background:transparent;height:1em;margin:0 .05em 0 .1em;vertical-align:-.1em;width:1em}
/*!
 * Marp / Marpit Gaia theme.
 *
 * @theme gaia
 * @author Yuki Hattori
 *
 * @auto-scaling true
 * @size 4:3 960px 720px
 */div#p>svg>foreignObject>section .hljs{display:block;overflow-x:auto;padding:.5em;background:#000;color:#f8f8f8}div#p>svg>foreignObject>section .hljs-comment,div#p>svg>foreignObject>section .hljs-quote{color:#aeaeae;font-style:italic}div#p>svg>foreignObject>section .hljs-keyword,div#p>svg>foreignObject>section .hljs-selector-tag,div#p>svg>foreignObject>section .hljs-type{color:#e28964}div#p>svg>foreignObject>section .hljs-string{color:#65b042}div#p>svg>foreignObject>section .hljs-subst{color:#daefa3}div#p>svg>foreignObject>section .hljs-link,div#p>svg>foreignObject>section .hljs-regexp{color:#e9c062}div#p>svg>foreignObject>section .hljs-name,div#p>svg>foreignObject>section .hljs-section,div#p>svg>foreignObject>section .hljs-tag,div#p>svg>foreignObject>section .hljs-title{color:#89bdff}div#p>svg>foreignObject>section .hljs-class .hljs-title,div#p>svg>foreignObject>section .hljs-doctag{text-decoration:underline}div#p>svg>foreignObject>section .hljs-bullet,div#p>svg>foreignObject>section .hljs-number,div#p>svg>foreignObject>section .hljs-symbol{color:#3387cc}div#p>svg>foreignObject>section .hljs-params,div#p>svg>foreignObject>section .hljs-template-variable,div#p>svg>foreignObject>section .hljs-variable{color:#3e87e3}div#p>svg>foreignObject>section .hljs-attribute{color:#cda869}div#p>svg>foreignObject>section .hljs-meta{color:#8996a8}div#p>svg>foreignObject>section .hljs-formula{background-color:#0e2231;color:#f8f8f8;font-style:italic}div#p>svg>foreignObject>section .hljs-addition{background-color:#253b22;color:#f8f8f8}div#p>svg>foreignObject>section .hljs-deletion{background-color:#420e09;color:#f8f8f8}div#p>svg>foreignObject>section .hljs-selector-class{color:#9b703f}div#p>svg>foreignObject>section .hljs-selector-id{color:#8b98ab}div#p>svg>foreignObject>section .hljs-emphasis{font-style:italic}div#p>svg>foreignObject>section .hljs-strong{font-weight:700}div#p>svg>foreignObject>section svg[data-marp-fitting=svg]{max-height:580px}div#p>svg>foreignObject>section h1,div#p>svg>foreignObject>section h2,div#p>svg>foreignObject>section h3,div#p>svg>foreignObject>section h4,div#p>svg>foreignObject>section h5,div#p>svg>foreignObject>section h6{margin:.5em 0 0}div#p>svg>foreignObject>section h1 strong,div#p>svg>foreignObject>section h2 strong,div#p>svg>foreignObject>section h3 strong,div#p>svg>foreignObject>section h4 strong,div#p>svg>foreignObject>section h5 strong,div#p>svg>foreignObject>section h6 strong{font-weight:inherit}div#p>svg>foreignObject>section h1{font-size:1.8em}div#p>svg>foreignObject>section h2{font-size:1.5em}div#p>svg>foreignObject>section h3{font-size:1.3em}div#p>svg>foreignObject>section h4{font-size:1.1em}div#p>svg>foreignObject>section h5{font-size:1em}div#p>svg>foreignObject>section h6{font-size:.9em}div#p>svg>foreignObject>section blockquote,div#p>svg>foreignObject>section p{margin:1em 0 0}div#p>svg>foreignObject>section ol>li,div#p>svg>foreignObject>section ul>li{margin:.3em 0 0}div#p>svg>foreignObject>section ol>li>p,div#p>svg>foreignObject>section ul>li>p{margin:.6em 0 0}div#p>svg>foreignObject>section code{display:inline-block;font-family:Roboto Mono,monospace;font-size:.8em;letter-spacing:0;margin:-.1em .15em;padding:.1em .2em;vertical-align:baseline}div#p>svg>foreignObject>section pre{display:block;margin:1em 0 0;min-height:1em;overflow:visible}div#p>svg>foreignObject>section pre code{box-sizing:border-box;margin:0;min-width:100%;padding:.5em;font-size:.7em}div#p>svg>foreignObject>section pre code svg[data-marp-fitting=svg]{max-height:calc(580px - 1em)}div#p>svg>foreignObject>section blockquote{margin:1em 0 0;padding:0 1em;position:relative}div#p>svg>foreignObject>section blockquote:after,div#p>svg>foreignObject>section blockquote:before{content:"“";display:block;font-family:Times New Roman,serif;font-weight:700;position:absolute}div#p>svg>foreignObject>section blockquote:before{top:0;left:0}div#p>svg>foreignObject>section blockquote:after{right:0;bottom:0;transform:rotate(180deg)}div#p>svg>foreignObject>section blockquote>:first-child{margin-top:0}div#p>svg>foreignObject>section mark{background:transparent}div#p>svg>foreignObject>section table{border-spacing:0;border-collapse:collapse;margin:1em 0 0}div#p>svg>foreignObject>section table td,div#p>svg>foreignObject>section table th{padding:.2em .4em;border-width:1px;border-style:solid}div#p>svg>foreignObject>section{background-image:linear-gradient(135deg,hsla(0,0%,53.3%,0),hsla(0,0%,53.3%,.02) 50%,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.05));font-size:35px;font-family:Lato,Avenir Next,Avenir,Trebuchet MS,Segoe UI,sans-serif;height:720px;line-height:1.35;letter-spacing:1.25px;padding:70px;width:1280px;word-wrap:break-word;color:#455a64;background-color:#fff8e1}div#p>svg>foreignObject>section{--marpit-root-font-size:35px}div#p>svg>foreignObject>section>:first-child,div#p>svg>foreignObject>section>header:first-child+*{margin-top:0}div#p>svg>foreignObject>section a,div#p>svg>foreignObject>section mark{color:#0288d1}div#p>svg>foreignObject>section code{background:#6a7a7d;color:#fff8e1}div#p>svg>foreignObject>section h1 strong,div#p>svg>foreignObject>section h2 strong,div#p>svg>foreignObject>section h3 strong,div#p>svg>foreignObject>section h4 strong,div#p>svg>foreignObject>section h5 strong,div#p>svg>foreignObject>section h6 strong{color:#0288d1}div#p>svg>foreignObject>section pre>code{background:#455a64}div#p>svg>foreignObject>section blockquote:after,div#p>svg>foreignObject>section blockquote:before,div#p>svg>foreignObject>section footer,div#p>svg>foreignObject>section header,div#p>svg>foreignObject>section section:after{color:#6a7a7d}div#p>svg>foreignObject>section table td,div#p>svg>foreignObject>section table th{border-color:#455a64}div#p>svg>foreignObject>section table thead th{background:#455a64;color:#fff8e1}div#p>svg>foreignObject>section table tbody>tr:nth-child(odd) td,div#p>svg>foreignObject>section table tbody>tr:nth-child(odd) th{background:rgba(69,90,100,.1)}div#p>svg>foreignObject>section.invert{color:#fff8e1;background-color:#455a64}div#p>svg>foreignObject>section.invert a,div#p>svg>foreignObject>section.invert mark{color:#81d4fa}div#p>svg>foreignObject>section.invert code{background:#dad8c8;color:#455a64}div#p>svg>foreignObject>section.invert h1 strong,div#p>svg>foreignObject>section.invert h2 strong,div#p>svg>foreignObject>section.invert h3 strong,div#p>svg>foreignObject>section.invert h4 strong,div#p>svg>foreignObject>section.invert h5 strong,div#p>svg>foreignObject>section.invert h6 strong{color:#81d4fa}div#p>svg>foreignObject>section.invert pre>code{background:#fff8e1}div#p>svg>foreignObject>section.invert blockquote:after,div#p>svg>foreignObject>section.invert blockquote:before,div#p>svg>foreignObject>section.invert footer,div#p>svg>foreignObject>section.invert header,div#p>svg>foreignObject>section.invert section:after{color:#dad8c8}div#p>svg>foreignObject>section.invert table td,div#p>svg>foreignObject>section.invert table th{border-color:#fff8e1}div#p>svg>foreignObject>section.invert table thead th{background:#fff8e1;color:#455a64}div#p>svg>foreignObject>section.invert table tbody>tr:nth-child(odd) td,div#p>svg>foreignObject>section.invert table tbody>tr:nth-child(odd) th{background:rgba(255,248,225,.1)}div#p>svg>foreignObject>section.gaia{color:#fff8e1;background-color:#0288d1}div#p>svg>foreignObject>section.gaia a,div#p>svg>foreignObject>section.gaia mark{color:#81d4fa}div#p>svg>foreignObject>section.gaia code{background:#cce2de;color:#0288d1}div#p>svg>foreignObject>section.gaia h1 strong,div#p>svg>foreignObject>section.gaia h2 strong,div#p>svg>foreignObject>section.gaia h3 strong,div#p>svg>foreignObject>section.gaia h4 strong,div#p>svg>foreignObject>section.gaia h5 strong,div#p>svg>foreignObject>section.gaia h6 strong{color:#81d4fa}div#p>svg>foreignObject>section.gaia pre>code{background:#fff8e1}div#p>svg>foreignObject>section.gaia blockquote:after,div#p>svg>foreignObject>section.gaia blockquote:before,div#p>svg>foreignObject>section.gaia footer,div#p>svg>foreignObject>section.gaia header,div#p>svg>foreignObject>section.gaia section:after{color:#cce2de}div#p>svg>foreignObject>section.gaia table td,div#p>svg>foreignObject>section.gaia table th{border-color:#fff8e1}div#p>svg>foreignObject>section.gaia table thead th{background:#fff8e1;color:#0288d1}div#p>svg>foreignObject>section.gaia table tbody>tr:nth-child(odd) td,div#p>svg>foreignObject>section.gaia table tbody>tr:nth-child(odd) th{background:rgba(255,248,225,.1)}div#p>svg>foreignObject>section.lead{display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:center}div#p>svg>foreignObject>section.lead h1,div#p>svg>foreignObject>section.lead h2,div#p>svg>foreignObject>section.lead h3,div#p>svg>foreignObject>section.lead h4,div#p>svg>foreignObject>section.lead h5,div#p>svg>foreignObject>section.lead h6{text-align:center}div#p>svg>foreignObject>section.lead h1 svg[data-marp-fitting=svg],div#p>svg>foreignObject>section.lead h2 svg[data-marp-fitting=svg],div#p>svg>foreignObject>section.lead h3 svg[data-marp-fitting=svg],div#p>svg>foreignObject>section.lead h4 svg[data-marp-fitting=svg],div#p>svg>foreignObject>section.lead h5 svg[data-marp-fitting=svg],div#p>svg>foreignObject>section.lead h6 svg[data-marp-fitting=svg]{--preserve-aspect-ratio:xMidYMid meet}div#p>svg>foreignObject>section.lead p{text-align:center}div#p>svg>foreignObject>section.lead blockquote>h1,div#p>svg>foreignObject>section.lead blockquote>h2,div#p>svg>foreignObject>section.lead blockquote>h3,div#p>svg>foreignObject>section.lead blockquote>h4,div#p>svg>foreignObject>section.lead blockquote>h5,div#p>svg>foreignObject>section.lead blockquote>h6,div#p>svg>foreignObject>section.lead blockquote>p{text-align:left}div#p>svg>foreignObject>section.lead blockquote svg[data-marp-fitting=svg]:not([data-marp-fitting-math]){--preserve-aspect-ratio:xMinYMin meet}div#p>svg>foreignObject>section.lead ol>li>p,div#p>svg>foreignObject>section.lead ul>li>p{text-align:left}div#p>svg>foreignObject>section.lead table{margin-left:auto;margin-right:auto}div#p>svg>foreignObject>section:after,div#p>svg>foreignObject>section footer,div#p>svg>foreignObject>section header{box-sizing:border-box;font-size:66%;height:70px;line-height:50px;overflow:hidden;padding:10px 25px;position:absolute}div#p>svg>foreignObject>section:after{--marpit-root-font-size:66%}div#p>svg>foreignObject>section header{top:0}div#p>svg>foreignObject>section footer,div#p>svg>foreignObject>section header{left:0;right:0}div#p>svg>foreignObject>section footer{bottom:0}div#p>svg>foreignObject>section:after{right:0;bottom:0;font-size:80%}div#p>svg>foreignObject>section:after{--marpit-root-font-size:80%}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]{display:block!important;padding:0!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=background]:before,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:after,div#p>svg>foreignObject>section[data-marpit-advanced-background=content]:before{display:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]{all:initial;display:flex;flex-direction:row;height:100%;overflow:hidden;width:100%}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container][data-marpit-advanced-background-direction=vertical]{flex-direction:column}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split]>div[data-marpit-advanced-background-container]{width:var(--marpit-advanced-background-split,50%)}div#p>svg>foreignObject>section[data-marpit-advanced-background=background][data-marpit-advanced-background-split=right]>div[data-marpit-advanced-background-container]{margin-left:calc(100% - var(--marpit-advanced-background-split, 50%))}div#p>svg>foreignObject>section[data-marpit-advanced-background=background]>div[data-marpit-advanced-background-container]>figure{all:initial;background-position:center;background-repeat:no-repeat;background-size:cover;flex:auto;margin:0}div#p>svg>foreignObject>section[data-marpit-advanced-background=content],div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo]{background:transparent!important}div#p>svg>foreignObject>section[data-marpit-advanced-background=pseudo],div#p>svg[data-marpit-svg]>foreignObject[data-marpit-advanced-background=pseudo]{pointer-events:none!important}div#p>svg>foreignObject>section[data-marpit-advanced-background-split]{width:100%;height:100%}</style></head><body><div class="bespoke-marp-osc"><button data-bespoke-marp-osc="prev" tabindex="-1" title="Previous slide">Previous slide</button><span data-bespoke-marp-osc="page"></span><button data-bespoke-marp-osc="next" tabindex="-1" title="Next slide">Next slide</button><button data-bespoke-marp-osc="fullscreen" tabindex="-1" title="Toggle fullscreen (f)">Toggle fullscreen</button><button data-bespoke-marp-osc="presenter" tabindex="-1" title="Open presenter view (p)">Open presenter view</button></div><div id="p"><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="1" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-class="lead" data-theme="gaia" class="lead" data-marpit-pagination="1" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--class:lead;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h1>第3章 内建数据结构、函数及文件</h1>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="2" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="2" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>本章讨论Python的内置功能，这些功能本书会用到很多。虽然扩展库，比如pandas和Numpy，使处理大数据集很方便，但它们是和Python的内置数据处理工具一同使用的。</p>
<p>我们会从Python最基础的数据结构开始：元组、列表、字典和集合。然后会讨论创建你自己的、可重复使用的Python函数。最后，会学习Python的文件对象，以及如何与本地硬盘交互。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="3" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="3" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h2>3.1 数据结构和序列</h2>
<p>==================</p>
<p>Python的数据结构简单而强大。通晓它们才能成为熟练的Python程序员。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="4" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="4" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.1.1 元组</h3>
<p>元组是一个固定长度，不可改变的Python序列对象。创建元组的最简单方式，是用逗号分隔一列值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">1</span>]: tup = <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>

In [<span class="hljs-number">2</span>]: tup
Out[<span class="hljs-number">2</span>]: (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="5" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="5" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>当用复杂的表达式定义元组，最好将值放到圆括号内，如下所示：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">3</span>]: nested_tup = (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">7</span>, <span class="hljs-number">8</span>)

In [<span class="hljs-number">4</span>]: nested_tup
Out[<span class="hljs-number">4</span>]: ((<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">7</span>, <span class="hljs-number">8</span>))
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="6" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="6" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>用<code>tuple</code>可以将任意序列或迭代器转换成元组：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">5</span>]: tuple([<span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>])
Out[<span class="hljs-number">5</span>]: (<span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>)

In [<span class="hljs-number">6</span>]: tup = tuple(<span class="hljs-string">&#x27;string&#x27;</span>)

In [<span class="hljs-number">7</span>]: tup
Out[<span class="hljs-number">7</span>]: (<span class="hljs-string">&#x27;s&#x27;</span>, <span class="hljs-string">&#x27;t&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;i&#x27;</span>, <span class="hljs-string">&#x27;n&#x27;</span>, <span class="hljs-string">&#x27;g&#x27;</span>)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="7" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="7" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>可以用方括号访问元组中的元素。和C、C++、JAVA等语言一样，序列是从0开始的：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">8</span>]: tup[<span class="hljs-number">0</span>]
Out[<span class="hljs-number">8</span>]: <span class="hljs-string">&#x27;s&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="8" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="8" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>元组中存储的对象可能是可变对象。一旦创建了元组，元组中的对象就不能修改了：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">9</span>]: tup = tuple([<span class="hljs-string">&#x27;foo&#x27;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-literal">True</span>])

In [<span class="hljs-number">10</span>]: tup[<span class="hljs-number">2</span>] = <span class="hljs-literal">False</span>
---------------------------------------------------------------------------
TypeError Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-10</span>-c7308343b841&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> tup[<span class="hljs-number">2</span>] = <span class="hljs-literal">False</span>
TypeError: <span class="hljs-string">&#x27;tuple&#x27;</span> object does <span class="hljs-keyword">not</span> support item assignment
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="9" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="9" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>如果元组中的某个对象是可变的，比如列表，可以在内部进行修改：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">11</span>]: tup[<span class="hljs-number">1</span>].append(<span class="hljs-number">3</span>)

In [<span class="hljs-number">12</span>]: tup
Out[<span class="hljs-number">12</span>]: (<span class="hljs-string">&#x27;foo&#x27;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-literal">True</span>)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="10" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="10" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>可以用加号运算符将元组串联起来：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">13</span>]: (<span class="hljs-number">4</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">&#x27;foo&#x27;</span>) + (<span class="hljs-number">6</span>, <span class="hljs-number">0</span>) + (<span class="hljs-string">&#x27;bar&#x27;</span>,)
Out[<span class="hljs-number">13</span>]: (<span class="hljs-number">4</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;bar&#x27;</span>)
</span></span></foreignObject></svg></code></pre>
<p>元组乘以一个整数，像列表一样，会将几个元组的复制串联起来：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">14</span>]: (<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>) * <span class="hljs-number">4</span>
Out[<span class="hljs-number">14</span>]: (<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>)
</span></span></foreignObject></svg></code></pre>
<p>对象本身并没有被复制，只是引用了它。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="11" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="11" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.1.1 元组拆包</h4>
<p>如果你想将元组赋值给类似元组的变量，Python会试图拆分等号右边的值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">15</span>]: tup = (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)

In [<span class="hljs-number">16</span>]: a, b, c = tup

In [<span class="hljs-number">17</span>]: b
Out[<span class="hljs-number">17</span>]: <span class="hljs-number">5</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="12" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="12" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>即使含有元组的元组也会被拆分：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">18</span>]: tup = <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, (<span class="hljs-number">6</span>, <span class="hljs-number">7</span>)

In [<span class="hljs-number">19</span>]: a, b, (c, d) = tup

In [<span class="hljs-number">20</span>]: d
Out[<span class="hljs-number">20</span>]: <span class="hljs-number">7</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="13" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="13" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>使用这个功能，你可以很容易地替换变量的名字，其它语言可能是这样：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>tmp = a
a = b
b = tmp
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="14" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="14" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>但是在Python中，替换可以这样做：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">21</span>]: a, b = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>

In [<span class="hljs-number">22</span>]: a
Out[<span class="hljs-number">22</span>]: <span class="hljs-number">1</span>

In [<span class="hljs-number">23</span>]: b
Out[<span class="hljs-number">23</span>]: <span class="hljs-number">2</span>

In [<span class="hljs-number">24</span>]: b, a = a, b

In [<span class="hljs-number">25</span>]: a
Out[<span class="hljs-number">25</span>]: <span class="hljs-number">2</span>

In [<span class="hljs-number">26</span>]: b
Out[<span class="hljs-number">26</span>]: <span class="hljs-number">1</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="15" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="15" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>变量拆分常用来迭代元组或列表序列：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">27</span>]: seq = [(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>)]

In [<span class="hljs-number">28</span>]: <span class="hljs-keyword">for</span> a, b, c <span class="hljs-keyword">in</span> seq:
   ....:     print(<span class="hljs-string">&#x27;a={0}, b={1}, c={2}&#x27;</span>.format(a, b, c))
a=<span class="hljs-number">1</span>, b=<span class="hljs-number">2</span>, c=<span class="hljs-number">3</span>
a=<span class="hljs-number">4</span>, b=<span class="hljs-number">5</span>, c=<span class="hljs-number">6</span>
a=<span class="hljs-number">7</span>, b=<span class="hljs-number">8</span>, c=<span class="hljs-number">9</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="16" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="16" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>另一个常见用法是从函数返回多个值。后面会详解。</p>
<p>Python最近新增了更多高级的元组拆分功能，允许从元组的开头“采集”几个元素。它使用了特殊的语法<code>*rest</code>，这也用在函数签名中以抓取任意长度列表的位置参数：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">29</span>]: values = <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>

In [<span class="hljs-number">30</span>]: a, b, *rest = values

In [<span class="hljs-number">31</span>]: a, b
Out[<span class="hljs-number">31</span>]: (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

In [<span class="hljs-number">32</span>]: rest
Out[<span class="hljs-number">32</span>]: [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="17" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="17" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><code>rest</code>的部分是想要舍弃的部分，rest的名字不重要。作为惯用写法，许多Python程序员会将不需要的变量使用下划线：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">33</span>]: a, b, *_ = values
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="18" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="18" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.1.2 tuple方法</h4>
<p>因为元组的大小和内容不能修改，它的实例方法都很轻量。其中一个很有用的就是<code>count</code>（也适用于列表），它可以统计某个值得出现频率：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">34</span>]: a = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>)

In [<span class="hljs-number">35</span>]: a.count(<span class="hljs-number">2</span>)
Out[<span class="hljs-number">35</span>]: <span class="hljs-number">4</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="19" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="19" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.1.2 列表</h3>
<p>与元组对比，列表的长度可变、内容可以被修改。你可以用方括号定义，或用<code>list</code>函数：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="20" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="20" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">36</span>]: a_list = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-literal">None</span>]

In [<span class="hljs-number">37</span>]: tup = (<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>)

In [<span class="hljs-number">38</span>]: b_list = list(tup)

In [<span class="hljs-number">39</span>]: b_list
Out[<span class="hljs-number">39</span>]: [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>]

In [<span class="hljs-number">40</span>]: b_list[<span class="hljs-number">1</span>] = <span class="hljs-string">&#x27;peekaboo&#x27;</span>

In [<span class="hljs-number">41</span>]: b_list
Out[<span class="hljs-number">41</span>]: [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;peekaboo&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="21" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="21" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>列表和元组的语义接近，在许多函数中可以交叉使用。</p>
<p><code>list</code>函数常用来在数据处理中实体化迭代器或生成器：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">42</span>]: gen = range(<span class="hljs-number">10</span>)

In [<span class="hljs-number">43</span>]: gen
Out[<span class="hljs-number">43</span>]: range(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)

In [<span class="hljs-number">44</span>]: list(gen)
Out[<span class="hljs-number">44</span>]: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="22" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="22" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.2.1 添加和删除元素</h4>
<p>可以用<code>append</code>在列表末尾添加元素：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">45</span>]: b_list.append(<span class="hljs-string">&#x27;dwarf&#x27;</span>)

In [<span class="hljs-number">46</span>]: b_list
Out[<span class="hljs-number">46</span>]: [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;peekaboo&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;dwarf&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="23" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="23" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><code>insert</code>可以在特定的位置插入元素：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">47</span>]: b_list.insert(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;red&#x27;</span>)

In [<span class="hljs-number">48</span>]: b_list
Out[<span class="hljs-number">48</span>]: [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;peekaboo&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;dwarf&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<p>插入的序号必须在0和列表长度之间。</p>
<blockquote>
<p>警告：与<code>append</code>相比，<code>insert</code>耗费的计算量大，因为对后续元素的引用必须在内部迁移，以便为新元素提供空间。如果要在序列的头部和尾部插入元素，你可能需要使用<code>collections.deque</code>，一个双尾部队列。</p>
</blockquote>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="24" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="24" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>insert的逆运算是pop，它移除并返回指定位置的元素：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">49</span>]: b_list.pop(<span class="hljs-number">2</span>)
Out[<span class="hljs-number">49</span>]: <span class="hljs-string">&#x27;peekaboo&#x27;</span>

In [<span class="hljs-number">50</span>]: b_list
Out[<span class="hljs-number">50</span>]: [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;dwarf&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="25" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="25" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>可以用<code>remove</code>去除某个值，<code>remove</code>会先寻找第一个值并除去：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">51</span>]: b_list.append(<span class="hljs-string">&#x27;foo&#x27;</span>)

In [<span class="hljs-number">52</span>]: b_list
Out[<span class="hljs-number">52</span>]: [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;dwarf&#x27;</span>, <span class="hljs-string">&#x27;foo&#x27;</span>]

In [<span class="hljs-number">53</span>]: b_list.remove(<span class="hljs-string">&#x27;foo&#x27;</span>)

In [<span class="hljs-number">54</span>]: b_list
Out[<span class="hljs-number">54</span>]: [<span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;dwarf&#x27;</span>, <span class="hljs-string">&#x27;foo&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<p>如果不考虑性能，使用<code>append</code>和<code>remove</code>，可以把Python的列表当做完美的“多重集”数据结构。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="26" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="26" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>用<code>in</code>可以检查列表是否包含某个值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">55</span>]: <span class="hljs-string">&#x27;dwarf&#x27;</span> <span class="hljs-keyword">in</span> b_list
Out[<span class="hljs-number">55</span>]: <span class="hljs-literal">True</span>
</span></span></foreignObject></svg></code></pre>
<p>否定<code>in</code>可以再加一个not：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">56</span>]: <span class="hljs-string">&#x27;dwarf&#x27;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> b_list
Out[<span class="hljs-number">56</span>]: <span class="hljs-literal">False</span>
</span></span></foreignObject></svg></code></pre>
<p>在列表中检查是否存在某个值远比字典和集合速度慢，因为Python是线性搜索列表中的值，但在字典和集合中，在同样的时间内还可以检查其它项（基于哈希表）。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="27" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="27" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.2.2 连接和联合列表</h4>
<p>与元组类似，可以用加号将两个列表串联起来：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">57</span>]: [<span class="hljs-number">4</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">&#x27;foo&#x27;</span>] + [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)]
Out[<span class="hljs-number">57</span>]: [<span class="hljs-number">4</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)]
</span></span></foreignObject></svg></code></pre>
<p>如果已经定义了一个列表，用<code>extend</code>方法可以追加多个元素：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">58</span>]: x = [<span class="hljs-number">4</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">&#x27;foo&#x27;</span>]

In [<span class="hljs-number">59</span>]: x.extend([<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)])

In [<span class="hljs-number">60</span>]: x
Out[<span class="hljs-number">60</span>]: [<span class="hljs-number">4</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="28" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="28" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>通过加法将列表串联的计算量较大，因为要新建一个列表，并且要复制对象。用<code>extend</code>追加元素，尤其是到一个大列表中，更为可取。因此：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>everything = []
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> list_of_lists:
    everything.extend(chunk)
</span></span></foreignObject></svg></code></pre>
<p>要比串联方法快：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>everything = []
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> list_of_lists:
    everything = everything + chunk
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="29" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="29" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.2.3 排序</h4>
<p>你可以用<code>sort</code>函数将一个列表原地排序（不创建新的对象）：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">61</span>]: a = [<span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>]

In [<span class="hljs-number">62</span>]: a.sort()

In [<span class="hljs-number">63</span>]: a
Out[<span class="hljs-number">63</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="30" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="30" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><code>sort</code>有一些选项，有时会很好用。其中之一是二级排序key，可以用这个key进行排序。例如，我们可以按长度对字符串进行排序：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">64</span>]: b = [<span class="hljs-string">&#x27;saw&#x27;</span>, <span class="hljs-string">&#x27;small&#x27;</span>, <span class="hljs-string">&#x27;He&#x27;</span>, <span class="hljs-string">&#x27;foxes&#x27;</span>, <span class="hljs-string">&#x27;six&#x27;</span>]

In [<span class="hljs-number">65</span>]: b.sort(key=len)

In [<span class="hljs-number">66</span>]: b
Out[<span class="hljs-number">66</span>]: [<span class="hljs-string">&#x27;He&#x27;</span>, <span class="hljs-string">&#x27;saw&#x27;</span>, <span class="hljs-string">&#x27;six&#x27;</span>, <span class="hljs-string">&#x27;small&#x27;</span>, <span class="hljs-string">&#x27;foxes&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<p>稍后，我们会学习<code>sorted</code>函数，它可以产生一个排好序的序列副本。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="31" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="31" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.24 二分搜索和维护已排序的列表</h4>
<p><code>bisect</code>模块支持二分查找，和向已排序的列表插入值。<code>bisect.bisect</code>可以找到插入值后仍保证排序的位置，<code>bisect.insort</code>是向这个位置插入值：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="32" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="32" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">67</span>]: <span class="hljs-keyword">import</span> bisect

In [<span class="hljs-number">68</span>]: c = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>]

In [<span class="hljs-number">69</span>]: bisect.bisect(c, <span class="hljs-number">2</span>)
Out[<span class="hljs-number">69</span>]: <span class="hljs-number">4</span>

In [<span class="hljs-number">70</span>]: bisect.bisect(c, <span class="hljs-number">5</span>)
Out[<span class="hljs-number">70</span>]: <span class="hljs-number">6</span>

In [<span class="hljs-number">71</span>]: bisect.insort(c, <span class="hljs-number">6</span>)

In [<span class="hljs-number">72</span>]: c
Out[<span class="hljs-number">72</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="33" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="33" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<blockquote>
<p>注意：<code>bisect</code>模块不会检查列表是否已排好序，进行检查的话会耗费大量计算。因此，对未排序的列表使用<code>bisect</code>不会产生错误，但结果不一定正确。</p>
</blockquote>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="34" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="34" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.2.5 切片</h4>
<p>用切边可以选取大多数序列类型的一部分，切片的基本形式是在方括号中使用<code>start:stop</code>：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">73</span>]: seq = [<span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]

In [<span class="hljs-number">74</span>]: seq[<span class="hljs-number">1</span>:<span class="hljs-number">5</span>]
Out[<span class="hljs-number">74</span>]: [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="35" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="35" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>切片也可以被序列赋值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">75</span>]: seq[<span class="hljs-number">3</span>:<span class="hljs-number">4</span>] = [<span class="hljs-number">6</span>, <span class="hljs-number">3</span>]

In [<span class="hljs-number">76</span>]: seq
Out[<span class="hljs-number">76</span>]: [<span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]
</span></span></foreignObject></svg></code></pre>
<p>切片的起始元素是包括的，不包含结束元素。因此，结果中包含的元素个数是<code>stop - start</code>。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="36" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="36" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><code>start</code>或<code>stop</code>都可以被省略，省略之后，分别默认序列的开头和结尾：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">77</span>]: seq[:<span class="hljs-number">5</span>]
Out[<span class="hljs-number">77</span>]: [<span class="hljs-number">7</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>]

In [<span class="hljs-number">78</span>]: seq[<span class="hljs-number">3</span>:]
Out[<span class="hljs-number">78</span>]: [<span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="37" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="37" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>负数表明从后向前切片：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">79</span>]: seq[<span class="hljs-number">-4</span>:]
Out[<span class="hljs-number">79</span>]: [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>]

In [<span class="hljs-number">80</span>]: seq[<span class="hljs-number">-6</span>:<span class="hljs-number">-2</span>]
Out[<span class="hljs-number">80</span>]: [<span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="38" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="38" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>需要一段时间来熟悉使用切片，尤其是当你之前学的是R或MATLAB。图3-1展示了正整数和负整数的切片。在图中，指数标示在边缘以表明切片是在哪里开始哪里结束的。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/7178691-522e2b688b755ff3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图3-1 Python切片演示" /></p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="39" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="39" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>在第二个冒号后面使用<code>step</code>，可以隔一个取一个元素：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">81</span>]: seq[::<span class="hljs-number">2</span>]
Out[<span class="hljs-number">81</span>]: [<span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>]
</span></span></foreignObject></svg></code></pre>
<p>一个聪明的方法是使用<code>-1</code>，它可以将列表或元组颠倒过来：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">82</span>]: seq[::<span class="hljs-number">-1</span>]
Out[<span class="hljs-number">82</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="40" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="40" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.1.3 内建序列函数</h3>
<p>Python有一些有用的序列函数。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="41" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="41" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.3.1 enumerate函数</h4>
<p>迭代一个序列时，你可能想跟踪当前项的序号。手动的方法可能是下面这样：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>i = <span class="hljs-number">0</span>
<span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> collection:
   <span class="hljs-comment"># do something with value</span>
   i += <span class="hljs-number">1</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="42" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="42" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>因为这么做很常见，Python内建了一个<code>enumerate</code>函数，可以返回<code>(i, value)</code>元组序列：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">for</span> i, value <span class="hljs-keyword">in</span> enumerate(collection):
   <span class="hljs-comment"># do something with value</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="43" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="43" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>当你索引数据时，使用<code>enumerate</code>的一个好方法是计算序列（唯一的）<code>dict</code>映射到位置的值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">83</span>]: some_list = [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>]

In [<span class="hljs-number">84</span>]: mapping = {}

In [<span class="hljs-number">85</span>]: <span class="hljs-keyword">for</span> i, v <span class="hljs-keyword">in</span> enumerate(some_list):
   ....:     mapping[v] = i

In [<span class="hljs-number">86</span>]: mapping
Out[<span class="hljs-number">86</span>]: {<span class="hljs-string">&#x27;bar&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;baz&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;foo&#x27;</span>: <span class="hljs-number">0</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="44" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="44" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.3.2 sorted函数</h4>
<p><code>sorted</code>函数可以从任意序列的元素返回一个新的排好序的列表：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">87</span>]: sorted([<span class="hljs-number">7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>])
Out[<span class="hljs-number">87</span>]: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]

In [<span class="hljs-number">88</span>]: sorted(<span class="hljs-string">&#x27;horse race&#x27;</span>)
Out[<span class="hljs-number">88</span>]: [<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27;h&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;s&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<p><code>sorted</code>函数可以接受和<code>sort</code>相同的参数。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="45" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="45" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.3. zip函数</h4>
<p><code>zip</code>可以将多个列表、元组或其它序列成对组合成一个元组列表：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">89</span>]: seq1 = [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>]

In [<span class="hljs-number">90</span>]: seq2 = [<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>]

In [<span class="hljs-number">91</span>]: zipped = zip(seq1, seq2)

In [<span class="hljs-number">92</span>]: list(zipped)
Out[<span class="hljs-number">92</span>]: [(<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;one&#x27;</span>), (<span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>), (<span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>)]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="46" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="46" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><code>zip</code>可以处理任意多的序列，元素的个数取决于最短的序列：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">93</span>]: seq3 = [<span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]

In [<span class="hljs-number">94</span>]: list(zip(seq1, seq2, seq3))
Out[<span class="hljs-number">94</span>]: [(<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-literal">False</span>), (<span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-literal">True</span>)]
</span></span></foreignObject></svg></code></pre>
<p><code>zip</code>的常见用法之一是同时迭代多个序列，可能结合<code>enumerate</code>使用：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">95</span>]: <span class="hljs-keyword">for</span> i, (a, b) <span class="hljs-keyword">in</span> enumerate(zip(seq1, seq2)):
   ....:     print(<span class="hljs-string">&#x27;{0}: {1}, {2}&#x27;</span>.format(i, a, b))
   ....:
<span class="hljs-number">0</span>: foo, one
<span class="hljs-number">1</span>: bar, two
<span class="hljs-number">2</span>: baz, three
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="47" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="47" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>给出一个“被压缩的”序列，<code>zip</code>可以被用来解压序列。也可以当作把行的列表转换为列的列表。这个方法看起来有点神奇：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">96</span>]: pitchers = [(<span class="hljs-string">&#x27;Nolan&#x27;</span>, <span class="hljs-string">&#x27;Ryan&#x27;</span>), (<span class="hljs-string">&#x27;Roger&#x27;</span>, <span class="hljs-string">&#x27;Clemens&#x27;</span>),
   ....:             (<span class="hljs-string">&#x27;Schilling&#x27;</span>, <span class="hljs-string">&#x27;Curt&#x27;</span>)]

In [<span class="hljs-number">97</span>]: first_names, last_names = zip(*pitchers)

In [<span class="hljs-number">98</span>]: first_names
Out[<span class="hljs-number">98</span>]: (<span class="hljs-string">&#x27;Nolan&#x27;</span>, <span class="hljs-string">&#x27;Roger&#x27;</span>, <span class="hljs-string">&#x27;Schilling&#x27;</span>)

In [<span class="hljs-number">99</span>]: last_names
Out[<span class="hljs-number">99</span>]: (<span class="hljs-string">&#x27;Ryan&#x27;</span>, <span class="hljs-string">&#x27;Clemens&#x27;</span>, <span class="hljs-string">&#x27;Curt&#x27;</span>)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="48" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="48" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.3.4 reversed函数</h4>
<p><code>reversed</code>可以从后向前迭代一个序列：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">100</span>]: list(reversed(range(<span class="hljs-number">10</span>)))
Out[<span class="hljs-number">100</span>]: [<span class="hljs-number">9</span>, <span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>]
</span></span></foreignObject></svg></code></pre>
<p>要记住<code>reversed</code>是一个生成器（后面详细介绍），只有实体化（即列表或for循环）之后才能创建翻转的序列。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="49" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="49" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.1.4 字典</h3>
<p>字典可能是Python最为重要的数据结构。它更为常见的名字是哈希映射或关联数组。它是键值对的大小可变集合，键和值都是Python对象。创建字典的方法之一是使用尖括号，用冒号分隔键和值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">101</span>]: empty_dict = {}

In [<span class="hljs-number">102</span>]: d1 = {<span class="hljs-string">&#x27;a&#x27;</span> : <span class="hljs-string">&#x27;some value&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span> : [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]}

In [<span class="hljs-number">103</span>]: d1
Out[<span class="hljs-number">103</span>]: {<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;some value&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="50" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="50" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>你可以像访问列表或元组中的元素一样，访问、插入或设定字典中的元素：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">104</span>]: d1[<span class="hljs-number">7</span>] = <span class="hljs-string">&#x27;an integer&#x27;</span>

In [<span class="hljs-number">105</span>]: d1
Out[<span class="hljs-number">105</span>]: {<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;some value&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;an integer&#x27;</span>}

In [<span class="hljs-number">106</span>]: d1[<span class="hljs-string">&#x27;b&#x27;</span>]
Out[<span class="hljs-number">106</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="51" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="51" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>你可以用检查列表和元组是否包含某个值的方法，检查字典中是否包含某个键：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">107</span>]: <span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">in</span> d1
Out[<span class="hljs-number">107</span>]: <span class="hljs-literal">True</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="52" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="52" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>可以用<code>del</code>关键字或<code>pop</code>方法（返回值的同时删除键）删除值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">108</span>]: d1[<span class="hljs-number">5</span>] = <span class="hljs-string">&#x27;some value&#x27;</span>

In [<span class="hljs-number">109</span>]: d1
Out[<span class="hljs-number">109</span>]:
{<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;some value&#x27;</span>,
 <span class="hljs-string">&#x27;b&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
 <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;an integer&#x27;</span>,
 <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;some value&#x27;</span>}

In [<span class="hljs-number">110</span>]: d1[<span class="hljs-string">&#x27;dummy&#x27;</span>] = <span class="hljs-string">&#x27;another value&#x27;</span>

In [<span class="hljs-number">111</span>]: d1
Out[<span class="hljs-number">111</span>]:
{<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;some value&#x27;</span>,
 <span class="hljs-string">&#x27;b&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
 <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;an integer&#x27;</span>,
 <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;some value&#x27;</span>,
 <span class="hljs-string">&#x27;dummy&#x27;</span>: <span class="hljs-string">&#x27;another value&#x27;</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="53" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="53" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>
In [<span class="hljs-number">112</span>]: <span class="hljs-keyword">del</span> d1[<span class="hljs-number">5</span>]

In [<span class="hljs-number">113</span>]: d1
Out[<span class="hljs-number">113</span>]:
{<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;some value&#x27;</span>,
 <span class="hljs-string">&#x27;b&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
 <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;an integer&#x27;</span>,
 <span class="hljs-string">&#x27;dummy&#x27;</span>: <span class="hljs-string">&#x27;another value&#x27;</span>}

In [<span class="hljs-number">114</span>]: ret = d1.pop(<span class="hljs-string">&#x27;dummy&#x27;</span>)

In [<span class="hljs-number">115</span>]: ret
Out[<span class="hljs-number">115</span>]: <span class="hljs-string">&#x27;another value&#x27;</span>

In [<span class="hljs-number">116</span>]: d1
Out[<span class="hljs-number">116</span>]: {<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;some value&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;an integer&#x27;</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="54" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="54" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><code>keys</code>和<code>values</code>是字典的键和值的迭代器方法。虽然键值对没有顺序，这两个方法可以用相同的顺序输出键和值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">117</span>]: list(d1.keys())
Out[<span class="hljs-number">117</span>]: [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-number">7</span>]

In [<span class="hljs-number">118</span>]: list(d1.values())
Out[<span class="hljs-number">118</span>]: [<span class="hljs-string">&#x27;some value&#x27;</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>], <span class="hljs-string">&#x27;an integer&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="55" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="55" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>用<code>update</code>方法可以将一个字典与另一个融合：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">119</span>]: d1.update({<span class="hljs-string">&#x27;b&#x27;</span> : <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span> : <span class="hljs-number">12</span>})

In [<span class="hljs-number">120</span>]: d1
Out[<span class="hljs-number">120</span>]: {<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;some value&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;an integer&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>: <span class="hljs-number">12</span>}
</span></span></foreignObject></svg></code></pre>
<p><code>update</code>方法是原地改变字典，因此任何传递给<code>update</code>的键的旧的值都会被舍弃。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="56" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="56" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.4.1 用序列创建字典</h4>
<p>常常，你可能想将两个序列配对组合成字典。下面是一种写法：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>mapping = {}
<span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> zip(key_list, value_list):
    mapping[key] = value
</span></span></foreignObject></svg></code></pre>
<p>因为字典本质上是2元元组的集合，dict可以接受2元元组的列表：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">121</span>]: mapping = dict(zip(range(<span class="hljs-number">5</span>), reversed(range(<span class="hljs-number">5</span>))))
In [<span class="hljs-number">122</span>]: mapping
Out[<span class="hljs-number">122</span>]: {<span class="hljs-number">0</span>: <span class="hljs-number">4</span>, <span class="hljs-number">1</span>: <span class="hljs-number">3</span>, <span class="hljs-number">2</span>: <span class="hljs-number">2</span>, <span class="hljs-number">3</span>: <span class="hljs-number">1</span>, <span class="hljs-number">4</span>: <span class="hljs-number">0</span>}
</span></span></foreignObject></svg></code></pre>
<p>后面会谈到<code>dict comprehensions</code>，另一种构建字典的优雅方式。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="57" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="57" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.4.2 默认值</h4>
<p>下面的逻辑很常见：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> some_dict:
    value = some_dict[key]
<span class="hljs-keyword">else</span>:
    value = default_value
</span></span></foreignObject></svg></code></pre>
<p>因此，dict的方法get和pop可以取默认值进行返回，上面的if-else语句可以简写成下面：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>value = some_dict.get(key, default_value)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="58" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="58" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>get默认会返回None，如果不存在键，pop会抛出一个例外。关于设定值，常见的情况是在字典的值是属于其它集合，如列表。例如，你可以通过首字母，将一个列表中的单词分类：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="59" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="59" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">123</span>]: words = [<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;bat&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;atom&#x27;</span>, <span class="hljs-string">&#x27;book&#x27;</span>]

In [<span class="hljs-number">124</span>]: by_letter = {}

In [<span class="hljs-number">125</span>]: <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> words:
   .....:     letter = word[<span class="hljs-number">0</span>]
   .....:     <span class="hljs-keyword">if</span> letter <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> by_letter:
   .....:         by_letter[letter] = [word]
   .....:     <span class="hljs-keyword">else</span>:
   .....:         by_letter[letter].append(word)
   .....:

In [<span class="hljs-number">126</span>]: by_letter
Out[<span class="hljs-number">126</span>]: {<span class="hljs-string">&#x27;a&#x27;</span>: [<span class="hljs-string">&#x27;apple&#x27;</span>, <span class="hljs-string">&#x27;atom&#x27;</span>], <span class="hljs-string">&#x27;b&#x27;</span>: [<span class="hljs-string">&#x27;bat&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;book&#x27;</span>]}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="60" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="60" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><code>setdefault</code>方法就正是干这个的。前面的for循环可以改写为：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> words:
    letter = word[<span class="hljs-number">0</span>]
    by_letter.setdefault(letter, []).append(word)
</span></span></foreignObject></svg></code></pre>
<p><code>collections</code>模块有一个很有用的类，<code>defaultdict</code>，它可以进一步简化上面。传递类型或函数以生成每个位置的默认值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict
by_letter = defaultdict(list)
<span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> words:
    by_letter[word[<span class="hljs-number">0</span>]].append(word)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="61" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="61" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.4.3 有效的键类型</h4>
<p>字典的值可以是任意Python对象，而键通常是不可变的标量类型（整数、浮点型、字符串）或元组（元组中的对象必须是不可变的）。这被称为“可哈希性”。可以用<code>hash</code>函数检测一个对象是否是可哈希的（可被用作字典的键）：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="62" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="62" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">127</span>]: hash(<span class="hljs-string">&#x27;string&#x27;</span>)
Out[<span class="hljs-number">127</span>]: <span class="hljs-number">5023931463650008331</span>

In [<span class="hljs-number">128</span>]: hash((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)))
Out[<span class="hljs-number">128</span>]: <span class="hljs-number">1097636502276347782</span>

In [<span class="hljs-number">129</span>]: hash((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>])) <span class="hljs-comment"># fails because lists are mutable</span>
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-129</span><span class="hljs-number">-800</span>cd14ba8be&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> hash((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>])) <span class="hljs-comment"># fails because lists are mutable</span>
TypeError: unhashable type: <span class="hljs-string">&#x27;list&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="63" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="63" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>要用列表当做键，一种方法是将列表转化为元组，只要内部元素可以被哈希，它也就可以被哈希：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">130</span>]: d = {}

In [<span class="hljs-number">131</span>]: d[tuple([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])] = <span class="hljs-number">5</span>

In [<span class="hljs-number">132</span>]: d
Out[<span class="hljs-number">132</span>]: {(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>): <span class="hljs-number">5</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="64" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="64" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.1.5 集合</h3>
<p>集合是无序的不可重复的元素的集合。你可以把它当做字典，但是只有键没有值。可以用两种方式创建集合：通过set函数或使用尖括号set语句：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">133</span>]: set([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>])
Out[<span class="hljs-number">133</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}

In [<span class="hljs-number">134</span>]: {<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>}
Out[<span class="hljs-number">134</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="65" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="65" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>集合支持合并、交集、差分和对称差等数学集合运算。考虑两个示例集合：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">135</span>]: a = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}

In [<span class="hljs-number">136</span>]: b = {<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>}
</span></span></foreignObject></svg></code></pre>
<p>合并是取两个集合中不重复的元素。可以用<code>union</code>方法，或者<code>|</code>运算符：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">137</span>]: a.union(b)
Out[<span class="hljs-number">137</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>}

In [<span class="hljs-number">138</span>]: a | b
Out[<span class="hljs-number">138</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="66" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="66" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>交集的元素包含在两个集合中。可以用<code>intersection</code>或<code>&amp;</code>运算符：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">139</span>]: a.intersection(b)
Out[<span class="hljs-number">139</span>]: {<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}

In [<span class="hljs-number">140</span>]: a &amp; b
Out[<span class="hljs-number">140</span>]: {<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="67" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="67" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>表3-1列出了常用的集合方法。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/7178691-980efe5d98ecc4d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表3-1 Python的集合操作" /></p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="68" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="68" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>所有逻辑集合操作都有另外的原地实现方法，可以直接用结果替代集合的内容。对于大的集合，这么做效率更高：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">141</span>]: c = a.copy()

In [<span class="hljs-number">142</span>]: c |= b

In [<span class="hljs-number">143</span>]: c
Out[<span class="hljs-number">143</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>}

In [<span class="hljs-number">144</span>]: d = a.copy()

In [<span class="hljs-number">145</span>]: d &amp;= b

In [<span class="hljs-number">146</span>]: d
Out[<span class="hljs-number">146</span>]: {<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="69" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="69" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>与字典类似，集合元素通常都是不可变的。要获得类似列表的元素，必须转换成元组：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">147</span>]: my_data = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]

In [<span class="hljs-number">148</span>]: my_set = {tuple(my_data)}

In [<span class="hljs-number">149</span>]: my_set
Out[<span class="hljs-number">149</span>]: {(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="70" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="70" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>你还可以检测一个集合是否是另一个集合的子集或父集：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">150</span>]: a_set = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}

In [<span class="hljs-number">151</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}.issubset(a_set)
Out[<span class="hljs-number">151</span>]: <span class="hljs-literal">True</span>

In [<span class="hljs-number">152</span>]: a_set.issuperset({<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>})
Out[<span class="hljs-number">152</span>]: <span class="hljs-literal">True</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="71" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="71" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>集合的内容相同时，集合才对等：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">153</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>} == {<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>}
Out[<span class="hljs-number">153</span>]: <span class="hljs-literal">True</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="72" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="72" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.1.6 列表、集合和字典推导式</h3>
<p>列表推导式是Python最受喜爱的特性之一。它允许用户方便的从一个集合过滤元素，形成列表，在传递参数的过程中还可以修改元素。形式如下：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>[expr <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> collection <span class="hljs-keyword">if</span> condition]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="73" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="73" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>它等同于下面的for循环;</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>result = []
<span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> collection:
    <span class="hljs-keyword">if</span> condition:
        result.append(expr)
</span></span></foreignObject></svg></code></pre>
<p>filter条件可以被忽略，只留下表达式就行。例如，给定一个字符串列表，我们可以过滤出长度在2及以下的字符串，并将其转换成大写：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">154</span>]: strings = [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;as&#x27;</span>, <span class="hljs-string">&#x27;bat&#x27;</span>, <span class="hljs-string">&#x27;car&#x27;</span>, <span class="hljs-string">&#x27;dove&#x27;</span>, <span class="hljs-string">&#x27;python&#x27;</span>]

In [<span class="hljs-number">155</span>]: [x.upper() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> strings <span class="hljs-keyword">if</span> len(x) &gt; <span class="hljs-number">2</span>]
Out[<span class="hljs-number">155</span>]: [<span class="hljs-string">&#x27;BAT&#x27;</span>, <span class="hljs-string">&#x27;CAR&#x27;</span>, <span class="hljs-string">&#x27;DOVE&#x27;</span>, <span class="hljs-string">&#x27;PYTHON&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="74" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="74" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>用相似的方法，还可以推导集合和字典。字典的推导式如下所示：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>dict_comp = {key-expr : value-expr <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> collection <span class="hljs-keyword">if</span> condition}
</span></span></foreignObject></svg></code></pre>
<p>集合的推导式与列表很像，只不过用的是尖括号：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>set_comp = {expr <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> collection <span class="hljs-keyword">if</span> condition}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="75" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="75" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>与列表推导式类似，集合与字典的推导也很方便，而且使代码的读写都很容易。来看前面的字符串列表。假如我们只想要字符串的长度，用集合推导式的方法非常方便：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">156</span>]: unique_lengths = {len(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> strings}

In [<span class="hljs-number">157</span>]: unique_lengths
Out[<span class="hljs-number">157</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>}
</span></span></foreignObject></svg></code></pre>
<p><code>map</code>函数可以进一步简化：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">158</span>]: set(map(len, strings))
Out[<span class="hljs-number">158</span>]: {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="76" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="76" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>作为一个字典推导式的例子，我们可以创建一个字符串的查找映射表以确定它在列表中的位置：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">159</span>]: loc_mapping = {val : index <span class="hljs-keyword">for</span> index, val <span class="hljs-keyword">in</span> enumerate(strings)}

In [<span class="hljs-number">160</span>]: loc_mapping
Out[<span class="hljs-number">160</span>]: {<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;as&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;bat&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;car&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;dove&#x27;</span>: <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;python&#x27;</span>: <span class="hljs-number">5</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="77" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="77" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.1.6.1 嵌套列表推导式</h4>
<p>假设我们有一个包含列表的列表，包含了一些英文名和西班牙名：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">161</span>]: all_data = [[<span class="hljs-string">&#x27;John&#x27;</span>, <span class="hljs-string">&#x27;Emily&#x27;</span>, <span class="hljs-string">&#x27;Michael&#x27;</span>, <span class="hljs-string">&#x27;Mary&#x27;</span>, <span class="hljs-string">&#x27;Steven&#x27;</span>],
   .....:             [<span class="hljs-string">&#x27;Maria&#x27;</span>, <span class="hljs-string">&#x27;Juan&#x27;</span>, <span class="hljs-string">&#x27;Javier&#x27;</span>, <span class="hljs-string">&#x27;Natalia&#x27;</span>, <span class="hljs-string">&#x27;Pilar&#x27;</span>]]
</span></span></foreignObject></svg></code></pre>
<p>你可能是从一些文件得到的这些名字，然后想按照语言进行分类。现在假设我们想用一个列表包含所有的名字，这些名字中包含两个或更多的e。可以用for循环来做：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="78" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="78" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>names_of_interest = []
<span class="hljs-keyword">for</span> names <span class="hljs-keyword">in</span> all_data:
    enough_es = [name <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> names <span class="hljs-keyword">if</span> name.count(<span class="hljs-string">&#x27;e&#x27;</span>) &gt;= <span class="hljs-number">2</span>]
    names_of_interest.extend(enough_es)
</span></span></foreignObject></svg></code></pre>
<p>可以用嵌套列表推导式的方法，将这些写在一起，如下所示：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">162</span>]: result = [name <span class="hljs-keyword">for</span> names <span class="hljs-keyword">in</span> all_data <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> names
   .....:           <span class="hljs-keyword">if</span> name.count(<span class="hljs-string">&#x27;e&#x27;</span>) &gt;= <span class="hljs-number">2</span>]

In [<span class="hljs-number">163</span>]: result
Out[<span class="hljs-number">163</span>]: [<span class="hljs-string">&#x27;Steven&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="79" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="79" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>嵌套列表推导式看起来有些复杂。列表推导式的for部分是根据嵌套的顺序，过滤条件还是放在最后。下面是另一个例子，我们将一个整数元组的列表扁平化成了一个整数列表：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">164</span>]: some_tuples = [(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>)]

In [<span class="hljs-number">165</span>]: flattened = [x <span class="hljs-keyword">for</span> tup <span class="hljs-keyword">in</span> some_tuples <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> tup]

In [<span class="hljs-number">166</span>]: flattened
Out[<span class="hljs-number">166</span>]: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="80" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="80" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>记住，for表达式的顺序是与嵌套for循环的顺序一样（而不是列表推导式的顺序）：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>flattened = []

<span class="hljs-keyword">for</span> tup <span class="hljs-keyword">in</span> some_tuples:
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> tup:
        flattened.append(x)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="81" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="81" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>你可以有任意多级别的嵌套，但是如果你有两三个以上的嵌套，你就应该考虑下代码可读性的问题了。分辨列表推导式的列表推导式中的语法也是很重要的：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">167</span>]: [[x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> tup] <span class="hljs-keyword">for</span> tup <span class="hljs-keyword">in</span> some_tuples]
Out[<span class="hljs-number">167</span>]: [[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]]
</span></span></foreignObject></svg></code></pre>
<p>这段代码产生了一个列表的列表，而不是扁平化的只包含元素的列表。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="82" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="82" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h2>3.2 函数</h2>
<p>函数是Python中最主要也是最重要的代码组织和复用手段。作为最重要的原则，如果你要重复使用相同或非常类似的代码，就需要写一个函数。通过给函数起一个名字，还可以提高代码的可读性。</p>
<p>函数使用<code>def</code>关键字声明，用<code>return</code>关键字返回值：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_function</span>(<span class="hljs-params">x, y, z=<span class="hljs-number">1.5</span></span>):</span>
    <span class="hljs-keyword">if</span> z &gt; <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> z * (x + y)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> z / (x + y)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="83" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="83" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>同时拥有多条return语句也是可以的。如果到达函数末尾时没有遇到任何一条return语句，则返回None。</p>
<p>函数可以有一些位置参数（positional）和一些关键字参数（keyword）。关键字参数通常用于指定默认值或可选参数。在上面的函数中，x和y是位置参数，而z则是关键字参数。也就是说，该函数可以下面这两种方式进行调用：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>my_function(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, z=<span class="hljs-number">0.7</span>)
my_function(<span class="hljs-number">3.14</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3.5</span>)
my_function(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="84" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="84" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>函数参数的主要限制在于：关键字参数必须位于位置参数（如果有的话）之后。你可以任何顺序指定关键字参数。也就是说，你不用死记硬背函数参数的顺序，只要记得它们的名字就可以了。</p>
<blockquote>
<p>笔记：也可以用关键字传递位置参数。前面的例子，也可以写为：<code>python my_function(x=5, y=6, z=7) my_function(y=6, x=5, z=7) </code> 这种写法可以提高可读性。</p>
</blockquote>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="85" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="85" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.1 命名空间、作用域，和局部函数</h3>
<p>函数可以访问两种不同作用域中的变量：全局（global）和局部（local）。Python有一种更科学的用于描述变量作用域的名称，即命名空间（namespace）。任何在函数中赋值的变量默认都是被分配到局部命名空间（local namespace）中的。局部命名空间是在函数被调用时创建的，函数参数会立即填入该命名空间。在函数执行完毕之后，局部命名空间就会被销毁（会有一些例外的情况，具体请参见后面介绍闭包的那一节）。看看下面这个函数：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>():</span>
    a = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):
        a.append(i)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="86" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="86" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>调用func()之后，首先会创建出空列表a，然后添加5个元素，最后a会在该函数退出的时候被销毁。假如我们像下面这样定义a：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>a = []
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>():</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):
        a.append(i)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="87" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="87" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>虽然可以在函数中对全局变量进行赋值操作，但是那些变量必须用global关键字声明成全局的才行：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">168</span>]: a = <span class="hljs-literal">None</span>

In [<span class="hljs-number">169</span>]: <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bind_a_variable</span>():</span>
   .....:     <span class="hljs-keyword">global</span> a
   .....:     a = []
   .....: bind_a_variable()
   .....:

In [<span class="hljs-number">170</span>]: print(a)
[]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="88" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="88" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<blockquote>
<p>注意：我常常建议人们不要频繁使用global关键字。因为全局变量一般是用于存放系统的某些状态的。如果你发现自己用了很多，那可能就说明得要来点儿面向对象编程了（即使用类）。</p>
</blockquote>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="89" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="89" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.2 返回多个值</h3>
<p>在我第一次用Python编程时（之前已经习惯了Java和C++），最喜欢的一个功能是：函数可以返回多个值。下面是一个简单的例子：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    a = <span class="hljs-number">5</span>
    b = <span class="hljs-number">6</span>
    c = <span class="hljs-number">7</span>
    <span class="hljs-keyword">return</span> a, b, c

a, b, c = f()
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="90" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="90" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>在数据分析和其他科学计算应用中，你会发现自己常常这么干。该函数其实只返回了一个对象，也就是一个元组，最后该元组会被拆包到各个结果变量中。在上面的例子中，我们还可以这样写：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>return_value = f()
</span></span></foreignObject></svg></code></pre>
<p>这里的return_value将会是一个含有3个返回值的三元元组。此外，还有一种非常具有吸引力的多值返回方式——返回字典：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">f</span>():</span>
    a = <span class="hljs-number">5</span>
    b = <span class="hljs-number">6</span>
    c = <span class="hljs-number">7</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">&#x27;a&#x27;</span> : a, <span class="hljs-string">&#x27;b&#x27;</span> : b, <span class="hljs-string">&#x27;c&#x27;</span> : c}
</span></span></foreignObject></svg></code></pre>
<p>取决于工作内容，第二种方法可能很有用。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="91" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="91" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.3 函数也是对象</h3>
<p>由于Python函数都是对象，因此，在其他语言中较难表达的一些设计思想在Python中就要简单很多了。假设我们有下面这样一个字符串数组，希望对其进行一些数据清理工作并执行一堆转换：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">171</span>]: states = [<span class="hljs-string">&#x27;   Alabama &#x27;</span>, <span class="hljs-string">&#x27;Georgia!&#x27;</span>, <span class="hljs-string">&#x27;Georgia&#x27;</span>, <span class="hljs-string">&#x27;georgia&#x27;</span>, <span class="hljs-string">&#x27;FlOrIda&#x27;</span>,
   .....:           <span class="hljs-string">&#x27;south   carolina##&#x27;</span>, <span class="hljs-string">&#x27;West virginia?&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="92" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="92" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>不管是谁，只要处理过由用户提交的调查数据，就能明白这种乱七八糟的数据是怎么一回事。为了得到一组能用于分析工作的格式统一的字符串，需要做很多事情：去除空白符、删除各种标点符号、正确的大写格式等。做法之一是使用内建的字符串方法和正则表达式<code>re</code>模块：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">import</span> re

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_strings</span>(<span class="hljs-params">strings</span>):</span>
    result = []
    <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> strings:
        value = value.strip()
        value = re.sub(<span class="hljs-string">&#x27;[!#?]&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, value)
        value = value.title()
        result.append(value)
    <span class="hljs-keyword">return</span> result
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="93" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="93" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>结果如下所示：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">173</span>]: clean_strings(states)
Out[<span class="hljs-number">173</span>]:
[<span class="hljs-string">&#x27;Alabama&#x27;</span>,
 <span class="hljs-string">&#x27;Georgia&#x27;</span>,
 <span class="hljs-string">&#x27;Georgia&#x27;</span>,
 <span class="hljs-string">&#x27;Georgia&#x27;</span>,
 <span class="hljs-string">&#x27;Florida&#x27;</span>,
 <span class="hljs-string">&#x27;South   Carolina&#x27;</span>,
 <span class="hljs-string">&#x27;West Virginia&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="94" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="94" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>其实还有另外一种不错的办法：将需要在一组给定字符串上执行的所有运算做成一个列表：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">remove_punctuation</span>(<span class="hljs-params">value</span>):</span>
    <span class="hljs-keyword">return</span> re.sub(<span class="hljs-string">&#x27;[!#?]&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, value)

clean_ops = [str.strip, remove_punctuation, str.title]

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clean_strings</span>(<span class="hljs-params">strings, ops</span>):</span>
    result = []
    <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> strings:
        <span class="hljs-keyword">for</span> function <span class="hljs-keyword">in</span> ops:
            value = function(value)
        result.append(value)
    <span class="hljs-keyword">return</span> result
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="95" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="95" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>然后我们就有了：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">175</span>]: clean_strings(states, clean_ops)
Out[<span class="hljs-number">175</span>]:
[<span class="hljs-string">&#x27;Alabama&#x27;</span>,
 <span class="hljs-string">&#x27;Georgia&#x27;</span>,
 <span class="hljs-string">&#x27;Georgia&#x27;</span>,
 <span class="hljs-string">&#x27;Georgia&#x27;</span>,
 <span class="hljs-string">&#x27;Florida&#x27;</span>,
 <span class="hljs-string">&#x27;South   Carolina&#x27;</span>,
 <span class="hljs-string">&#x27;West Virginia&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="96" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="96" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>这种多函数模式使你能在很高的层次上轻松修改字符串的转换方式。此时的clean_strings也更具可复用性！</p>
<p>还可以将函数用作其他函数的参数，比如内置的map函数，它用于在一组数据上应用一个函数：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">176</span>]: <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> map(remove_punctuation, states):
   .....:     print(x)
Alabama
Georgia
Georgia
georgia
FlOrIda
south   carolina
West virginia
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="97" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="97" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.4 匿名（lambda）函数</h3>
<p>Python支持一种被称为匿名的、或lambda函数。它仅由单条语句组成，该语句的结果就是返回值。它是通过lambda关键字定义的，这个关键字没有别的含义，仅仅是说“我们正在声明的是一个匿名函数”。</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">short_function</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>

equiv_anon = <span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="98" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="98" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>本书其余部分一般将其称为lambda函数。它们在数据分析工作中非常方便，因为你会发现很多数据转换函数都以函数作为参数的。直接传入lambda函数比编写完整函数声明要少输入很多字（也更清晰），甚至比将lambda函数赋值给一个变量还要少输入很多字。看看下面这个简单得有些傻的例子：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">apply_to_list</span>(<span class="hljs-params">some_list, f</span>):</span>
    <span class="hljs-keyword">return</span> [f(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> some_list]

ints = [<span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
apply_to_list(ints, <span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="99" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="99" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>虽然你可以直接编写<code>[x * 2 for x in ints]</code>，但是这里我们可以非常轻松地传入一个自定义运算给apply_to_list函数。</p>
<p>再来看另外一个例子。假设有一组字符串，你想要根据各字符串不同字母的数量对其进行排序：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">177</span>]: strings = [<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;card&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;aaaa&#x27;</span>, <span class="hljs-string">&#x27;abab&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="100" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="100" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>这里，我们可以传入一个lambda函数到列表的sort方法：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">178</span>]: strings.sort(key=<span class="hljs-keyword">lambda</span> x: len(set(list(x))))

In [<span class="hljs-number">179</span>]: strings
Out[<span class="hljs-number">179</span>]: [<span class="hljs-string">&#x27;aaaa&#x27;</span>, <span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;abab&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;card&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<blockquote>
<p>笔记：lambda函数之所以会被称为匿名函数，与def声明的函数不同，原因之一就是这种函数对象本身是没有提供名称<strong>name</strong>属性。</p>
</blockquote>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="101" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="101" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.5 柯里化：部分参数应用</h3>
<p>柯里化（currying）是一个有趣的计算机科学术语，它指的是通过“部分参数应用”（partial argument application）从现有函数派生出新函数的技术。例如，假设我们有一个执行两数相加的简单函数：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_numbers</span>(<span class="hljs-params">x, y</span>):</span>
    <span class="hljs-keyword">return</span> x + y
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="102" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="102" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>通过这个函数，我们可以派生出一个新的只有一个参数的函数——add_five，它用于对其参数加5：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>add_five = <span class="hljs-keyword">lambda</span> y: add_numbers(<span class="hljs-number">5</span>, y)
</span></span></foreignObject></svg></code></pre>
<p>add_numbers的第二个参数称为“柯里化的”（curried）。这里没什么特别花哨的东西，因为我们其实就只是定义了一个可以调用现有函数的新函数而已。内置的functools模块可以用partial函数将此过程简化：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial
add_five = partial(add_numbers, <span class="hljs-number">5</span>)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="103" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="103" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.6 生成器</h3>
<p>能以一种一致的方式对序列进行迭代（比如列表中的对象或文件中的行）是Python的一个重要特点。这是通过一种叫做迭代器协议（iterator protocol，它是一种使对象可迭代的通用方式）的方式实现的，一个原生的使对象可迭代的方法。比如说，对字典进行迭代可以得到其所有的键：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">180</span>]: some_dict = {<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;c&#x27;</span>: <span class="hljs-number">3</span>}

In [<span class="hljs-number">181</span>]: <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> some_dict:
   .....:     print(key)
a
b
c
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="104" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="104" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>当你编写for key in some_dict时，Python解释器首先会尝试从some_dict创建一个迭代器：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">182</span>]: dict_iterator = iter(some_dict)

In [<span class="hljs-number">183</span>]: dict_iterator
Out[<span class="hljs-number">183</span>]: &lt;dict_keyiterator at <span class="hljs-number">0x7fbbd5a9f908</span>&gt;
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="105" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="105" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>迭代器是一种特殊对象，它可以在诸如for循环之类的上下文中向Python解释器输送对象。大部分能接受列表之类的对象的方法也都可以接受任何可迭代对象。比如min、max、sum等内置方法以及list、tuple等类型构造器：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">184</span>]: list(dict_iterator)
Out[<span class="hljs-number">184</span>]: [<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="106" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="106" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>生成器（generator）是构造新的可迭代对象的一种简单方式。一般的函数执行之后只会返回单个值，而生成器则是以延迟的方式返回一个值序列，即每返回一个值之后暂停，直到下一个值被请求时再继续。要创建一个生成器，只需将函数中的return替换为yeild即可：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">squares</span>(<span class="hljs-params">n=<span class="hljs-number">10</span></span>):</span>
    print(<span class="hljs-string">&#x27;Generating squares from 1 to {0}&#x27;</span>.format(n ** <span class="hljs-number">2</span>))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):
        <span class="hljs-keyword">yield</span> i ** <span class="hljs-number">2</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="107" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="107" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>调用该生成器时，没有任何代码会被立即执行：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">186</span>]: gen = squares()

In [<span class="hljs-number">187</span>]: gen
Out[<span class="hljs-number">187</span>]: &lt;generator object squares at <span class="hljs-number">0x7fbbd5ab4570</span>&gt;
</span></span></foreignObject></svg></code></pre>
<p>直到你从该生成器中请求元素时，它才会开始执行其代码：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">188</span>]: <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> gen:
   .....:     print(x, end=<span class="hljs-string">&#x27; &#x27;</span>)
Generating squares <span class="hljs-keyword">from</span> <span class="hljs-number">1</span> to <span class="hljs-number">100</span>
<span class="hljs-number">1</span> <span class="hljs-number">4</span> <span class="hljs-number">9</span> <span class="hljs-number">16</span> <span class="hljs-number">25</span> <span class="hljs-number">36</span> <span class="hljs-number">49</span> <span class="hljs-number">64</span> <span class="hljs-number">81</span> <span class="hljs-number">100</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="108" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="108" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.6 生成器表达式</h3>
<p>另一种更简洁的构造生成器的方法是使用生成器表达式（generator expression）。这是一种类似于列表、字典、集合推导式的生成器。其创建方式为，把列表推导式两端的方括号改成圆括号：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">189</span>]: gen = (x ** <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>))

In [<span class="hljs-number">190</span>]: gen
Out[<span class="hljs-number">190</span>]: &lt;generator object &lt;genexpr&gt; at <span class="hljs-number">0x7fbbd5ab29e8</span>&gt;
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="109" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="109" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>它跟下面这个冗长得多的生成器是完全等价的：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_make_gen</span>():</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>):
        <span class="hljs-keyword">yield</span> x ** <span class="hljs-number">2</span>
gen = _make_gen()
</span></span></foreignObject></svg></code></pre>
<p>生成器表达式也可以取代列表推导式，作为函数参数：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">191</span>]: sum(x ** <span class="hljs-number">2</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">100</span>))
Out[<span class="hljs-number">191</span>]: <span class="hljs-number">328350</span>

In [<span class="hljs-number">192</span>]: dict((i, i **<span class="hljs-number">2</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>))
Out[<span class="hljs-number">192</span>]: {<span class="hljs-number">0</span>: <span class="hljs-number">0</span>, <span class="hljs-number">1</span>: <span class="hljs-number">1</span>, <span class="hljs-number">2</span>: <span class="hljs-number">4</span>, <span class="hljs-number">3</span>: <span class="hljs-number">9</span>, <span class="hljs-number">4</span>: <span class="hljs-number">16</span>}
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="110" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="110" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.2.6.1 itertools模块</h4>
<p>标准库itertools模块中有一组用于许多常见数据算法的生成器。例如，groupby可以接受任何序列和一个函数。它根据函数的返回值对序列中的连续元素进行分组。下面是一个例子：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="111" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="111" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">193</span>]: <span class="hljs-keyword">import</span> itertools

In [<span class="hljs-number">194</span>]: first_letter = <span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>]

In [<span class="hljs-number">195</span>]: names = [<span class="hljs-string">&#x27;Alan&#x27;</span>, <span class="hljs-string">&#x27;Adam&#x27;</span>, <span class="hljs-string">&#x27;Wes&#x27;</span>, <span class="hljs-string">&#x27;Will&#x27;</span>, <span class="hljs-string">&#x27;Albert&#x27;</span>, <span class="hljs-string">&#x27;Steven&#x27;</span>]

In [<span class="hljs-number">196</span>]: <span class="hljs-keyword">for</span> letter, names <span class="hljs-keyword">in</span> itertools.groupby(names, first_letter):
   .....:     print(letter, list(names)) <span class="hljs-comment"># names is a generator</span>
A [<span class="hljs-string">&#x27;Alan&#x27;</span>, <span class="hljs-string">&#x27;Adam&#x27;</span>]
W [<span class="hljs-string">&#x27;Wes&#x27;</span>, <span class="hljs-string">&#x27;Will&#x27;</span>]
A [<span class="hljs-string">&#x27;Albert&#x27;</span>]
S [<span class="hljs-string">&#x27;Steven&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="112" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="112" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>表3-2中列出了一些我经常用到的itertools函数。建议参阅Python官方文档，进一步学习。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/7178691-111823d8767a104d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表3-2 一些有用的itertools函数" /></p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="113" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="113" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.2.7 错误和异常处理</h3>
<p>优雅地处理Python的错误和异常是构建健壮程序的重要部分。在数据分析中，许多函数函数只用于部分输入。例如，Python的float函数可以将字符串转换成浮点数，但输入有误时，有<code>ValueError</code>错误：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">197</span>]: float(<span class="hljs-string">&#x27;1.2345&#x27;</span>)
Out[<span class="hljs-number">197</span>]: <span class="hljs-number">1.2345</span>

In [<span class="hljs-number">198</span>]: float(<span class="hljs-string">&#x27;something&#x27;</span>)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-198</span><span class="hljs-number">-439904410854</span>&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> float(<span class="hljs-string">&#x27;something&#x27;</span>)
ValueError: could <span class="hljs-keyword">not</span> convert string to float: <span class="hljs-string">&#x27;something&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="114" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="114" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>假如想优雅地处理float的错误，让它返回输入值。我们可以写一个函数，在try/except中调用float：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">attempt_float</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">return</span> float(x)
    <span class="hljs-keyword">except</span>:
        <span class="hljs-keyword">return</span> x
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="115" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="115" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>当float(x)抛出异常时，才会执行except的部分：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">200</span>]: attempt_float(<span class="hljs-string">&#x27;1.2345&#x27;</span>)
Out[<span class="hljs-number">200</span>]: <span class="hljs-number">1.2345</span>

In [<span class="hljs-number">201</span>]: attempt_float(<span class="hljs-string">&#x27;something&#x27;</span>)
Out[<span class="hljs-number">201</span>]: <span class="hljs-string">&#x27;something&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<p>你可能注意到float抛出的异常不仅是ValueError：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">202</span>]: float((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-202</span><span class="hljs-number">-842079</span>ebb635&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> float((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
TypeError: float() argument must be a string <span class="hljs-keyword">or</span> a number, <span class="hljs-keyword">not</span> <span class="hljs-string">&#x27;tuple&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="116" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="116" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>你可能只想处理ValueError，TypeError错误（输入不是字符串或数值）可能是合理的bug。可以写一个异常类型：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">attempt_float</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">return</span> float(x)
    <span class="hljs-keyword">except</span> ValueError:
        <span class="hljs-keyword">return</span> x
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="117" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="117" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>然后有：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">204</span>]: attempt_float((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-204</span><span class="hljs-number">-9</span>bdfd730cead&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> attempt_float((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))
&lt;ipython-input<span class="hljs-number">-203</span><span class="hljs-number">-3e06</span>b8379b6b&gt; <span class="hljs-keyword">in</span> attempt_float(x)
      <span class="hljs-number">1</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">attempt_float</span>(<span class="hljs-params">x</span>):</span>
      <span class="hljs-number">2</span>     <span class="hljs-keyword">try</span>:
----&gt; <span class="hljs-number">3</span>         <span class="hljs-keyword">return</span> float(x)
      <span class="hljs-number">4</span>     <span class="hljs-keyword">except</span> ValueError:
      <span class="hljs-number">5</span>         <span class="hljs-keyword">return</span> x
TypeError: float() argument must be a string <span class="hljs-keyword">or</span> a number, <span class="hljs-keyword">not</span> <span class="hljs-string">&#x27;tuple&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="118" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="118" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>可以用元组包含多个异常：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">attempt_float</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">return</span> float(x)
    <span class="hljs-keyword">except</span> (TypeError, ValueError):
        <span class="hljs-keyword">return</span> x
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="119" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="119" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>某些情况下，你可能不想抑制异常，你想无论try部分的代码是否成功，都执行一段代码。可以使用finally：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>f = open(path, <span class="hljs-string">&#x27;w&#x27;</span>)

<span class="hljs-keyword">try</span>:
    write_to_file(f)
<span class="hljs-keyword">finally</span>:
    f.close()
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="120" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="120" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>这里，文件处理f总会被关闭。相似的，你可以用else让只在try部分成功的情况下，才执行代码：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>f = open(path, <span class="hljs-string">&#x27;w&#x27;</span>)

<span class="hljs-keyword">try</span>:
    write_to_file(f)
<span class="hljs-keyword">except</span>:
    print(<span class="hljs-string">&#x27;Failed&#x27;</span>)
<span class="hljs-keyword">else</span>:
    print(<span class="hljs-string">&#x27;Succeeded&#x27;</span>)
<span class="hljs-keyword">finally</span>:
    f.close()
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="121" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="121" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h4>3.2.7.1 IPython的异常</h4>
<p>如果是在%run一个脚本或一条语句时抛出异常，IPython默认会打印完整的调用栈（traceback），在栈的每个点都会有几行上下文：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="122" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="122" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">10</span>]: %run examples/ipython_bug.py
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
/home/wesm/code/pydata-book/examples/ipython_bug.py <span class="hljs-keyword">in</span> &lt;module&gt;()
     <span class="hljs-number">13</span>     throws_an_exception()
     <span class="hljs-number">14</span>
---&gt; <span class="hljs-number">15</span> calling_things()

/home/wesm/code/pydata-book/examples/ipython_bug.py <span class="hljs-keyword">in</span> calling_things()
     <span class="hljs-number">11</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calling_things</span>():</span>
     <span class="hljs-number">12</span>     works_fine()
---&gt; <span class="hljs-number">13</span>     throws_an_exception()
     <span class="hljs-number">14</span>
     <span class="hljs-number">15</span> calling_things()

/home/wesm/code/pydata-book/examples/ipython_bug.py <span class="hljs-keyword">in</span> throws_an_exception()
      <span class="hljs-number">7</span>     a = <span class="hljs-number">5</span>
      <span class="hljs-number">8</span>     b = <span class="hljs-number">6</span>
----&gt; <span class="hljs-number">9</span>     <span class="hljs-keyword">assert</span>(a + b == <span class="hljs-number">10</span>)
     <span class="hljs-number">10</span>
     <span class="hljs-number">11</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calling_things</span>():</span>

AssertionError:
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="123" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="123" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>自身就带有文本是相对于Python标准解释器的极大优点。你可以用魔术命令<code>%xmode</code>，从Plain（与Python标准解释器相同）到Verbose（带有函数的参数值）控制文本显示的数量。后面可以看到，发生错误之后，（用%debug或%pdb magics）可以进入stack进行事后调试。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="124" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="124" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h2>3.3 文件和操作系统</h2>
<p>本书的代码示例大多使用诸如pandas.read_csv之类的高级工具将磁盘上的数据文件读入Python数据结构。但我们还是需要了解一些有关Python文件处理方面的基础知识。好在它本来就很简单，这也是Python在文本和文件处理方面的如此流行的原因之一。</p>
<p>为了打开一个文件以便读写，可以使用内置的open函数以及一个相对或绝对的文件路径：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">207</span>]: path = <span class="hljs-string">&#x27;examples/segismundo.txt&#x27;</span>

In [<span class="hljs-number">208</span>]: f = open(path)
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="125" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="125" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>默认情况下，文件是以只读模式（'r'）打开的。然后，我们就可以像处理列表那样来处理这个文件句柄f了，比如对行进行迭代：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap><span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:
    <span class="hljs-keyword">pass</span>
</span></span></foreignObject></svg></code></pre>
<p>从文件中取出的行都带有完整的行结束符（EOL），因此你常常会看到下面这样的代码（得到一组没有EOL的行）：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="126" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="126" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">209</span>]: lines = [x.rstrip() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> open(path)]

In [<span class="hljs-number">210</span>]: lines
Out[<span class="hljs-number">210</span>]:
[<span class="hljs-string">&#x27;Sueña el rico en su riqueza,&#x27;</span>,
 <span class="hljs-string">&#x27;que más cuidados le ofrece;&#x27;</span>,
 <span class="hljs-string">&#x27;&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el pobre que padece&#x27;</span>,
 <span class="hljs-string">&#x27;su miseria y su pobreza;&#x27;</span>,
 <span class="hljs-string">&#x27;&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el que a medrar empieza,&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el que afana y pretende,&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el que agravia y ofende,&#x27;</span>,
 <span class="hljs-string">&#x27;&#x27;</span>,
 <span class="hljs-string">&#x27;y en el mundo, en conclusión,&#x27;</span>,
 <span class="hljs-string">&#x27;todos sueñan lo que son,&#x27;</span>,
 <span class="hljs-string">&#x27;aunque ninguno lo entiende.&#x27;</span>,
 <span class="hljs-string">&#x27;&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="127" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="127" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>如果使用open创建文件对象，一定要用close关闭它。关闭文件可以返回操作系统资源：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">211</span>]: f.close()
</span></span></foreignObject></svg></code></pre>
<p>用with语句可以可以更容易地清理打开的文件：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">212</span>]: <span class="hljs-keyword">with</span> open(path) <span class="hljs-keyword">as</span> f:
   .....:     lines = [x.rstrip() <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> f]
</span></span></foreignObject></svg></code></pre>
<p>这样可以在退出代码块时，自动关闭文件。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="128" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="128" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>如果输入f =open(path,'w')，就会有一个新文件被创建在examples/segismundo.txt，并覆盖掉该位置原来的任何数据。另外有一个x文件模式，它可以创建可写的文件，但是如果文件路径存在，就无法创建。表3-3列出了所有的读/写模式。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="129" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="129" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p><img src="http://upload-images.jianshu.io/upload_images/7178691-28274484129f0ea7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表3-3 Python的文件模式" /></p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="130" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="130" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>对于可读文件，一些常用的方法是read、seek和tell。read会从文件返回字符。字符的内容是由文件的编码决定的（如UTF-8），如果是二进制模式打开的就是原始字节：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">213</span>]: f = open(path)

In [<span class="hljs-number">214</span>]: f.read(<span class="hljs-number">10</span>)
Out[<span class="hljs-number">214</span>]: <span class="hljs-string">&#x27;Sueña el r&#x27;</span>

In [<span class="hljs-number">215</span>]: f2 = open(path, <span class="hljs-string">&#x27;rb&#x27;</span>)  <span class="hljs-comment"># Binary mode</span>

In [<span class="hljs-number">216</span>]: f2.read(<span class="hljs-number">10</span>)
Out[<span class="hljs-number">216</span>]: <span class="hljs-string">b&#x27;Sue\xc3\xb1a el &#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="131" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="131" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>read模式会将文件句柄的位置提前，提前的数量是读取的字节数。tell可以给出当前的位置：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">217</span>]: f.tell()
Out[<span class="hljs-number">217</span>]: <span class="hljs-number">11</span>

In [<span class="hljs-number">218</span>]: f2.tell()
Out[<span class="hljs-number">218</span>]: <span class="hljs-number">10</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="132" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="132" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>尽管我们从文件读取了10个字符，位置却是11，这是因为用默认的编码用了这么多字节才解码了这10个字符。你可以用sys模块检查默认的编码：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">219</span>]: <span class="hljs-keyword">import</span> sys

In [<span class="hljs-number">220</span>]: sys.getdefaultencoding()
Out[<span class="hljs-number">220</span>]: <span class="hljs-string">&#x27;utf-8&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="133" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="133" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>seek将文件位置更改为文件中的指定字节：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">221</span>]: f.seek(<span class="hljs-number">3</span>)
Out[<span class="hljs-number">221</span>]: <span class="hljs-number">3</span>

In [<span class="hljs-number">222</span>]: f.read(<span class="hljs-number">1</span>)
Out[<span class="hljs-number">222</span>]: <span class="hljs-string">&#x27;ñ&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="134" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="134" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>最后，关闭文件：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">223</span>]: f.close()

In [<span class="hljs-number">224</span>]: f2.close()
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="135" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="135" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>向文件写入，可以使用文件的write或writelines方法。例如，我们可以创建一个无空行版的prof_mod.py：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="136" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="136" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">225</span>]: <span class="hljs-keyword">with</span> open(<span class="hljs-string">&#x27;tmp.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> handle:
   .....:     handle.writelines(x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> open(path) <span class="hljs-keyword">if</span> len(x) &gt; <span class="hljs-number">1</span>)

In [<span class="hljs-number">226</span>]: <span class="hljs-keyword">with</span> open(<span class="hljs-string">&#x27;tmp.txt&#x27;</span>) <span class="hljs-keyword">as</span> f:
   .....:     lines = f.readlines()

In [<span class="hljs-number">227</span>]: lines
Out[<span class="hljs-number">227</span>]:
[<span class="hljs-string">&#x27;Sueña el rico en su riqueza,\n&#x27;</span>,
 <span class="hljs-string">&#x27;que más cuidados le ofrece;\n&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el pobre que padece\n&#x27;</span>,
 <span class="hljs-string">&#x27;su miseria y su pobreza;\n&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el que a medrar empieza,\n&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el que afana y pretende,\n&#x27;</span>,
 <span class="hljs-string">&#x27;sueña el que agravia y ofende,\n&#x27;</span>,
 <span class="hljs-string">&#x27;y en el mundo, en conclusión,\n&#x27;</span>,
 <span class="hljs-string">&#x27;todos sueñan lo que son,\n&#x27;</span>,
 <span class="hljs-string">&#x27;aunque ninguno lo entiende.\n&#x27;</span>]
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="137" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="137" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>表3-4列出了一些最常用的文件方法。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/7178691-d25bd6e730afeb39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="表3-4 Python重要的文件方法或属性" /></p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="138" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="138" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h3>3.3.1 文件的字节和Unicode</h3>
<p>Python文件的默认操作是“文本模式”，也就是说，你需要处理Python的字符串（即Unicode）。它与“二进制模式”相对，文件模式加一个b。我们来看上一节的文件（UTF-8编码、包含非ASCII字符）：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">230</span>]: <span class="hljs-keyword">with</span> open(path) <span class="hljs-keyword">as</span> f:
   .....:     chars = f.read(<span class="hljs-number">10</span>)

In [<span class="hljs-number">231</span>]: chars
Out[<span class="hljs-number">231</span>]: <span class="hljs-string">&#x27;Sueña el r&#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="139" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="139" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>UTF-8是长度可变的Unicode编码，所以当我从文件请求一定数量的字符时，Python会从文件读取足够多（可能少至10或多至40字节）的字节进行解码。如果以“rb”模式打开文件，则读取确切的请求字节数：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">232</span>]: <span class="hljs-keyword">with</span> open(path, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:
   .....:     data = f.read(<span class="hljs-number">10</span>)

In [<span class="hljs-number">233</span>]: data
Out[<span class="hljs-number">233</span>]: <span class="hljs-string">b&#x27;Sue\xc3\xb1a el &#x27;</span>
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="140" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="140" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>取决于文本的编码，你可以将字节解码为str对象，但只有当每个编码的Unicode字符都完全成形时才能这么做：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">234</span>]: data.decode(<span class="hljs-string">&#x27;utf8&#x27;</span>)
Out[<span class="hljs-number">234</span>]: <span class="hljs-string">&#x27;Sueña el &#x27;</span>

In [<span class="hljs-number">235</span>]: data[:<span class="hljs-number">4</span>].decode(<span class="hljs-string">&#x27;utf8&#x27;</span>)
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-235</span><span class="hljs-number">-300e0</span>af10bb7&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> data[:<span class="hljs-number">4</span>].decode(<span class="hljs-string">&#x27;utf8&#x27;</span>)
UnicodeDecodeError: <span class="hljs-string">&#x27;utf-8&#x27;</span> codec can<span class="hljs-string">&#x27;t decode byte 0xc3 in position 3: unexpecte
d end of data
</span></span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="141" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="141" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>文本模式结合了open的编码选项，提供了一种更方便的方法将Unicode转换为另一种编码：</p>
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">236</span>]: sink_path = <span class="hljs-string">&#x27;sink.txt&#x27;</span>

In [<span class="hljs-number">237</span>]: <span class="hljs-keyword">with</span> open(path) <span class="hljs-keyword">as</span> source:
   .....:     <span class="hljs-keyword">with</span> open(sink_path, <span class="hljs-string">&#x27;xt&#x27;</span>, encoding=<span class="hljs-string">&#x27;iso-8859-1&#x27;</span>) <span class="hljs-keyword">as</span> sink:
   .....:         sink.write(source.read())

In [<span class="hljs-number">238</span>]: <span class="hljs-keyword">with</span> open(sink_path, encoding=<span class="hljs-string">&#x27;iso-8859-1&#x27;</span>) <span class="hljs-keyword">as</span> f:
   .....:     print(f.read(<span class="hljs-number">10</span>))
Sueña el r
</span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="142" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="142" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>注意，不要在二进制模式中使用seek。如果文件位置位于定义Unicode字符的字节的中间位置，读取后面会产生错误：</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="143" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="143" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<pre><code class="language-python"><svg data-marp-fitting="svg" data-marp-fitting-code><foreignObject><span data-marp-fitting-svg-content><span data-marp-fitting-svg-content-wrap>In [<span class="hljs-number">240</span>]: f = open(path)

In [<span class="hljs-number">241</span>]: f.read(<span class="hljs-number">5</span>)
Out[<span class="hljs-number">241</span>]: <span class="hljs-string">&#x27;Sueña&#x27;</span>

In [<span class="hljs-number">242</span>]: f.seek(<span class="hljs-number">4</span>)
Out[<span class="hljs-number">242</span>]: <span class="hljs-number">4</span>

In [<span class="hljs-number">243</span>]: f.read(<span class="hljs-number">1</span>)
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-243</span><span class="hljs-number">-7841103e33</span>f5&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> f.read(<span class="hljs-number">1</span>)
/miniconda/envs/book-env/lib/python3<span class="hljs-number">.6</span>/codecs.py <span class="hljs-keyword">in</span> decode(self, input, final)
    <span class="hljs-number">319</span>         <span class="hljs-comment"># decode input (taking the buffer into account)</span>
    <span class="hljs-number">320</span>         data = self.buffer + input
--&gt; <span class="hljs-number">321</span>         (result, consumed) = self._buffer_decode(data, self.errors, final
)
    <span class="hljs-number">322</span>         <span class="hljs-comment"># keep undecoded input until the next call</span>
    <span class="hljs-number">323</span>         self.buffer = data[consumed:]
UnicodeDecodeError: <span class="hljs-string">&#x27;utf-8&#x27;</span> codec can<span class="hljs-string">&#x27;t decode byte 0xb1 in position 0: invalid s
tart byte

In [244]: f.close()
</span></span></span></foreignObject></svg></code></pre>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="144" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="144" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<p>如果你经常要对非ASCII字符文本进行数据分析，通晓Python的Unicode功能是非常重要的。更多内容，参阅Python官方文档。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
</foreignObject></svg><svg data-marpit-svg="" viewBox="0 0 1280 720"><foreignObject width="1280" height="720"><section id="145" data-paginate="true" data-background-color="#fff" data-background-image="url('https://marp.app/assets/hero-background.jpg')" data-footer="林肯叔叔 @ www.shujudaka.com" data-theme="gaia" data-marpit-pagination="145" data-marpit-pagination-total="145" style="--paginate:true;--background-color:#fff;--background-image:url('https://marp.app/assets/hero-background.jpg');--footer:林肯叔叔 @ www.shujudaka.com;--theme:gaia;background-color:#fff;background-image:url('https://marp.app/assets/hero-background.jpg');background-position:center;background-repeat:no-repeat;background-size:cover;">
<h2>3.4 结论</h2>
<p>我们已经学过了Python的基础、环境和语法，接下来学习NumPy和Python的面向数组计算。</p>
<footer>林肯叔叔 @ <a href="http://www.shujudaka.com">www.shujudaka.com</a></footer>
</section>
<script>!function(){"use strict";const t="marpitSVGPolyfill:setZoomFactor,",e=Symbol();let o,r;function n(n){const i="object"==typeof n&&n.target||document,a="object"==typeof n?n.zoom:n;window[e]||(Object.defineProperty(window,e,{configurable:!0,value:!0}),window.addEventListener("message",({data:e,origin:o})=>{if(o===window.origin)try{if(e&&"string"==typeof e&&e.startsWith(t)){const[,t]=e.split(","),o=Number.parseFloat(t);Number.isNaN(o)||(r=o)}}catch(t){console.error(t)}}));let l=!1;Array.from(i.querySelectorAll("svg[data-marpit-svg]"),t=>{var e,n,i,s;t.style.transform||(t.style.transform="translateZ(0)");const c=a||r||t.currentScale||1;o!==c&&(o=c,l=c);const d=t.getBoundingClientRect(),{length:u}=t.children;for(let o=0;o<u;o+=1){const r=t.children[o],a=r.getScreenCTM();if(a){const t=null!==(n=null===(e=r.x)||void 0===e?void 0:e.baseVal.value)&&void 0!==n?n:0,o=null!==(s=null===(i=r.y)||void 0===i?void 0:i.baseVal.value)&&void 0!==s?s:0,l=r.firstChild,{style:u}=l;u.transformOrigin||(u.transformOrigin=`${-t}px ${-o}px`),u.transform=`scale(${c}) matrix(${a.a}, ${a.b}, ${a.c}, ${a.d}, ${a.e-d.left}, ${a.f-d.top}) translateZ(0.0001px)`}}}),!1!==l&&Array.from(i.querySelectorAll("iframe"),({contentWindow:e})=>{null==e||e.postMessage(`${t}${l}`,"null"===window.origin?"*":window.origin)})}o=1,r=void 0;const i=(t,e,o)=>{if(t.getAttribute(e)!==o)return t.setAttribute(e,o),!0};function a(t={}){const e="boolean"==typeof t?(t=>{const e=!t;return console.warn(`[DEPRECATION WARNING] Usage of observer() with boolean option has been deprecated. Please replace with the usage of option object: observer({ once: ${e?"true":"false"} }).`),{once:e}})(t):t,{once:o=!1,target:r=document}=e,a="Apple Computer, Inc."===navigator.vendor?[n]:[];let l=!o;const s=()=>{for(const t of a)t({target:r});!function(t=document){Array.from(t.querySelectorAll('svg[data-marp-fitting="svg"]'),t=>{var e;const o=t.firstChild,r=o.firstChild,{scrollWidth:n,scrollHeight:a}=r;let l,s=1;if(t.hasAttribute("data-marp-fitting-code")&&(l=null===(e=t.parentElement)||void 0===e?void 0:e.parentElement),t.hasAttribute("data-marp-fitting-math")&&(l=t.parentElement),l){const t=getComputedStyle(l),e=Math.ceil(l.clientWidth-parseFloat(t.paddingLeft||"0")-parseFloat(t.paddingRight||"0"));e&&(s=e)}const c=Math.max(n,s),d=Math.max(a,1),u=`0 0 ${c} ${d}`;i(o,"width",""+c),i(o,"height",""+d),i(t,"preserveAspectRatio",getComputedStyle(t).getPropertyValue("--preserve-aspect-ratio")||"xMinYMin meet"),i(t,"viewBox",u)&&t.classList.toggle("__reflow__")})}(r),l&&window.requestAnimationFrame(s)};return s(),()=>{l=!1}}const l=Symbol(),s=document.currentScript;((t=document)=>{if("undefined"==typeof window)throw new Error("Marp Core's browser script is valid only in browser context.");if(t[l])return t[l];const e=a({target:t}),o=()=>{e(),delete t[l]};Object.defineProperty(t,l,{configurable:!0,value:o})})(s?s.getRootNode():document)}();
</script></foreignObject></svg></div><script>!function(){"use strict";var e=function(e,t){var n,r=1===(e.parent||e).nodeType?e.parent||e:document.querySelector(e.parent||e),a=[].filter.call("string"==typeof e.slides?r.querySelectorAll(e.slides):e.slides||r.children,(function(e){return"SCRIPT"!==e.nodeName})),s={},i=function(e,t){return(t=t||{}).index=a.indexOf(e),t.slide=e,t},o=function(e,t){s[e]=(s[e]||[]).filter((function(e){return e!==t}))},l=function(e,t){return(s[e]||[]).reduce((function(e,n){return e&&!1!==n(t)}),!0)},c=function(e,t){a[e]&&(n&&l("deactivate",i(n,t)),n=a[e],l("activate",i(n,t)))},d=function(e,t){var r=a.indexOf(n)+e;l(e>0?"next":"prev",i(n,t))&&c(r,t)},u={off:o,on:function(e,t){return(s[e]||(s[e]=[])).push(t),o.bind(null,e,t)},fire:l,slide:function(e,t){if(!arguments.length)return a.indexOf(n);l("slide",i(a[e],t))&&c(e,t)},next:d.bind(null,1),prev:d.bind(null,-1),parent:r,slides:a,destroy:function(e){l("destroy",i(n,e)),s={}}};return(t||[]).forEach((function(e){e(u)})),n||c(0),u};function t(e){e.parent.classList.add("bespoke-marp-parent"),e.slides.forEach(e=>e.classList.add("bespoke-marp-slide")),e.on("activate",t=>{const n=t.slide,r=!n.classList.contains("bespoke-marp-active");e.slides.forEach(e=>{e.classList.remove("bespoke-marp-active"),e.setAttribute("aria-hidden","true")}),n.classList.add("bespoke-marp-active"),n.removeAttribute("aria-hidden"),r&&(n.classList.add("bespoke-marp-active-ready"),document.body.clientHeight,n.classList.remove("bespoke-marp-active-ready"))})}function n(e){let t=0,n=0;Object.defineProperty(e,"fragments",{enumerable:!0,value:e.slides.map(e=>[null,...e.querySelectorAll("[data-marpit-fragment]")])});const r=r=>void 0!==e.fragments[t][n+r],a=(r,a)=>{t=r,n=a,e.fragments.forEach((e,t)=>{e.forEach((e,n)=>{if(null==e)return;const s=t<r||t===r&&n<=a;e.setAttribute("data-bespoke-marp-fragment",s?"active":"inactive"),t===r&&n===a?e.setAttribute("data-bespoke-marp-current-fragment","current"):e.removeAttribute("data-bespoke-marp-current-fragment")})}),e.fragmentIndex=a;const s={slide:e.slides[r],index:r,fragments:e.fragments[r],fragmentIndex:a};e.fire("fragment",s)};e.on("next",({fragment:s=!0})=>{if(s){if(r(1))return a(t,n+1),!1;const s=t+1;e.fragments[s]&&a(s,0)}else{const r=e.fragments[t].length;if(n+1<r)return a(t,r-1),!1;const s=e.fragments[t+1];s&&a(t+1,s.length-1)}}),e.on("prev",({fragment:s=!0})=>{if(r(-1)&&s)return a(t,n-1),!1;const i=t-1;e.fragments[i]&&a(i,e.fragments[i].length-1)}),e.on("slide",({index:t,fragment:n})=>{let r=0;if(void 0!==n){const a=e.fragments[t];if(a){const{length:e}=a;r=-1===n?e-1:Math.min(Math.max(n,0),e-1)}}a(t,r)}),a(0,0)}var r,a,s=(function(e){
/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/
!function(){var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,a=n.length,s={};r<a;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)s[n[0][r]]=e[r];return s}return!1}(),a={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(e){return new Promise(function(n,a){var s=function(){this.off("change",s),n()}.bind(this);this.on("change",s);var i=(e=e||t.documentElement)[r.requestFullscreen]();i instanceof Promise&&i.then(s).catch(a)}.bind(this))},exit:function(){return new Promise(function(e,n){if(this.isFullscreen){var a=function(){this.off("change",a),e()}.bind(this);this.on("change",a);var s=t[r.exitFullscreen]();s instanceof Promise&&s.then(a).catch(n)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=a[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=a[e];r&&t.removeEventListener(r,n,!1)},raw:r};r?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=s:window.screenfull=s):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()}(a={path:r,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&a.path)}},a.exports),a.exports);function i(e){e.fullscreen=()=>{s.isEnabled&&s.toggle(document.body)},document.addEventListener("keydown",t=>{70!==t.which&&122!==t.which||t.altKey||t.ctrlKey||t.metaKey||!s.isEnabled||(e.fullscreen(),t.preventDefault())})}function o(e=2e3){return t=>{let n;function r(){n&&clearTimeout(n),n=setTimeout(()=>{t.parent.classList.add("bespoke-marp-inactive"),t.fire("marp-inactive")},e),t.parent.classList.contains("bespoke-marp-inactive")&&(t.parent.classList.remove("bespoke-marp-inactive"),t.fire("marp-active"))}document.addEventListener("mousedown",r),document.addEventListener("mousemove",r),document.addEventListener("touchend",r),setTimeout(r,0)}}const l=["AUDIO","BUTTON","INPUT","SELECT","TEXTAREA","VIDEO"];function c(e){e.parent.addEventListener("keydown",e=>{if(!e.target)return;const t=e.target;(l.includes(t.nodeName)||"true"===t.contentEditable)&&e.stopPropagation()})}function d(e){window.addEventListener("load",()=>{for(const t of e.slides){const e=t.querySelector("[data-marp-fitting]")?"":"hideable";t.setAttribute("data-bespoke-marp-load",e)}})}var u;function f({interval:e=200}={}){return t=>{document.addEventListener("keydown",e=>{if(32===e.which&&e.shiftKey)t.prev();else if(33===e.which||37===e.which||38===e.which)t.prev({fragment:!e.shiftKey});else if(32!==e.which||e.shiftKey)if(34===e.which||39===e.which||40===e.which)t.next({fragment:!e.shiftKey});else if(35===e.which)t.slide(t.slides.length-1,{fragment:-1});else{if(36!==e.which)return;t.slide(0)}else t.next();e.preventDefault()});let n,r,a=0;t.parent.addEventListener("wheel",s=>{let i=!1;const o=(e,t)=>{e&&(i=i||function(e,t){return function(e,t){const n=t===u.X?"Width":"Height";return e["client"+n]<e["scroll"+n]}(e,t)&&function(e,t){const{overflow:n}=e,r=e["overflow"+t];return"auto"===n||"scroll"===n||"auto"===r||"scroll"===r}(getComputedStyle(e),t)}(e,t)),(null==e?void 0:e.parentElement)&&o(e.parentElement,t)};if(0!==s.deltaX&&o(s.target,u.X),0!==s.deltaY&&o(s.target,u.Y),i)return;s.preventDefault(),r&&clearTimeout(r),r=setTimeout(()=>{n=0},e);const l=Date.now()-a<e,c=Math.sqrt(Math.pow(s.deltaX,2)+Math.pow(s.deltaY,2)),d=c<=n;if(n=c,l||d)return;let f;(s.deltaX>0||s.deltaY>0)&&(f="next"),(s.deltaX<0||s.deltaY<0)&&(f="prev"),f&&(t[f](),a=Date.now())})}}!function(e){e.X="X",e.Y="Y"}(u||(u={}));const m=(...e)=>history.replaceState(...e),p="data-bespoke-view";var h;!function(e){e.Normal="",e.Presenter="presenter",e.Next="next"}(h||(h={}));const g=(e,{protocol:t,host:n,pathname:r,hash:a}=location)=>{const s=e.toString();return`${t}//${n}${r}${s?"?":""}${s}${a}`},v=()=>{switch(document.body.getAttribute(p)){case h.Normal:return h.Normal;case h.Presenter:return h.Presenter;case h.Next:return h.Next;default:throw new Error("View mode is not assigned.")}},b=e=>new URLSearchParams(location.search).get(e),w=(e,t={})=>{const n=Object.assign({location:location,setter:m},t),r=new URLSearchParams(n.location.search);for(const t of Object.keys(e)){const n=e[t];"string"==typeof n?r.set(t,n):r.delete(t)}try{n.setter(null,document.title,g(r,n.location))}catch(e){console.error(e)}},y={available:(()=>{try{return localStorage.setItem("bespoke-marp","bespoke-marp"),localStorage.removeItem("bespoke-marp"),!0}catch(e){return console.warn("Warning: Using localStorage is restricted in the current host so some features may not work."),!1}})(),get:e=>{try{return localStorage.getItem(e)}catch(e){return null}},set:(e,t)=>{try{return localStorage.setItem(e,t),!0}catch(e){return!1}},remove:e=>{try{return localStorage.removeItem(e),!0}catch(e){return!1}}};function x(e=".bespoke-marp-osc"){const t=document.querySelector(e);if(!t)return()=>{};const n=(e,n)=>{t.querySelectorAll(`[data-bespoke-marp-osc=${JSON.stringify(e)}]`).forEach(n)};return s.isEnabled||n("fullscreen",e=>e.style.display="none"),y.available||n("presenter",e=>{e.disabled=!0,e.title="Presenter view is disabled due to restricted localStorage."}),e=>{t.addEventListener("click",t=>{if(t.target instanceof HTMLElement){const{bespokeMarpOsc:n}=t.target.dataset;switch(n&&t.target.blur(),n){case"next":e.next({fragment:!t.shiftKey});break;case"prev":e.prev({fragment:!t.shiftKey});break;case"fullscreen":"function"==typeof e.fullscreen&&s.isEnabled&&e.fullscreen();break;case"presenter":e.openPresenterView()}}}),e.parent.appendChild(t),e.on("activate",({index:t})=>{n("page",n=>n.textContent=`Page ${t+1} of ${e.slides.length}`)}),e.on("fragment",({index:t,fragments:r,fragmentIndex:a})=>{n("prev",e=>e.disabled=0===t&&0===a),n("next",n=>n.disabled=t===e.slides.length-1&&a===r.length-1)}),e.on("marp-active",()=>t.removeAttribute("aria-hidden")),e.on("marp-inactive",()=>t.setAttribute("aria-hidden","true")),s.isEnabled&&s.onchange(()=>n("fullscreen",e=>e.classList.toggle("exit",s.isEnabled&&s.isFullscreen)))}}function E(){const e=Math.max(Math.floor(.85*window.innerWidth),640),t=Math.max(Math.floor(.85*window.innerHeight),360);return window.open(this.presenterUrl,"bespoke-marp-presenter-"+this.syncKey,`width=${e},height=${t},menubar=no,toolbar=no`)}function k(){const e=new URLSearchParams(location.search);return e.set("view","presenter"),e.set("sync",this.syncKey),g(e)}var L=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];let S=e=>String(e).replace(/[&<>"']/g,e=>`&${I[e]};`),I={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},P="dangerouslySetInnerHTML",M={className:"class",htmlFor:"for"},N={};function F(e,t){let n=[],r="";t=t||{};for(let e=arguments.length;e-- >2;)n.push(arguments[e]);if("function"==typeof e)return t.children=n.reverse(),e(t);if(e){if(r+="<"+e,t)for(let e in t)!1!==t[e]&&null!=t[e]&&e!==P&&(r+=` ${M[e]?M[e]:S(e)}="${S(t[e])}"`);r+=">"}if(-1===L.indexOf(e)){if(t[P])r+=t[P].__html;else for(;n.length;){let e=n.pop();if(e)if(e.pop)for(let t=e.length;t--;)n.push(e[t]);else r+=!0===N[e]?e:S(e)}r+=e?`</${e}>`:""}return N[r]=!0,r}const O=({children:e})=>F(null,null,...e),q="bespoke-marp-presenter-container",C="bespoke-marp-presenter-next",T="bespoke-marp-presenter-next-container",A="bespoke-marp-presenter-note-container",K="bespoke-marp-presenter-info-container",$="bespoke-marp-presenter-info-page",j="bespoke-marp-presenter-info-page-text",D="bespoke-marp-presenter-info-page-prev",R="bespoke-marp-presenter-info-page-next",U="bespoke-marp-presenter-info-time",V="bespoke-marp-presenter-info-timer";function X(e){const{title:t}=document;document.title="[Presenter view]"+(t?" - "+t:"");const n={},r=e=>(n[e]=n[e]||document.querySelector("."+e),n[e]);document.body.appendChild((e=>{const t=document.createElement("div");return t.className=q,t.appendChild(e),t.insertAdjacentHTML("beforeend",F(O,null,F("div",{class:T},F("iframe",{class:C,src:"?view=next"})),F("div",{class:A}),F("div",{class:K},F("div",{class:$},F("button",{class:D,tabindex:"-1",title:"Previous"},"Previous"),F("span",{class:j}),F("button",{class:R,tabindex:"-1",title:"Next"},"Next")),F("time",{class:U,title:"Current time"}),F("div",{class:V})))),t})(e.parent)),(e=>{r(T).addEventListener("click",()=>e.next());const t=r(C),n=(a=t,(e,t)=>{var n;return null===(n=a.contentWindow)||void 0===n?void 0:n.postMessage(`navigate:${e},${t}`,"null"===window.origin?"*":window.origin)});var a;t.addEventListener("load",()=>{r(T).classList.add("active"),n(e.slide(),e.fragmentIndex),e.on("fragment",({index:e,fragmentIndex:t})=>n(e,t))});const s=document.querySelectorAll(".bespoke-marp-note");s.forEach(e=>{e.addEventListener("keydown",e=>e.stopPropagation()),r(A).appendChild(e)}),e.on("activate",()=>s.forEach(t=>t.classList.toggle("active",t.dataset.index==e.slide()))),e.on("activate",({index:t})=>{r(j).textContent=`${t+1} / ${e.slides.length}`});const i=r(D),o=r(R);i.addEventListener("click",t=>{i.blur(),e.prev({fragment:!t.shiftKey})}),o.addEventListener("click",t=>{o.blur(),e.next({fragment:!t.shiftKey})}),e.on("fragment",({index:t,fragments:n,fragmentIndex:r})=>{i.disabled=0===t&&0===r,o.disabled=t===e.slides.length-1&&r===n.length-1});const l=()=>r(U).textContent=(new Date).toLocaleTimeString();l(),setInterval(l,250)})(e)}function Y(e){const t=v();return t===h.Next&&e.appendChild(document.createElement("span")),e=>{t===h.Normal&&function(e){if(!(e=>e.syncKey&&"string"==typeof e.syncKey)(e))throw new Error("The current instance of Bespoke.js is invalid for Marp bespoke presenter plugin.");Object.defineProperties(e,{openPresenterView:{enumerable:!0,value:E},presenterUrl:{enumerable:!0,get:k}}),y.available&&document.addEventListener("keydown",t=>{80!==t.which||t.altKey||t.ctrlKey||t.metaKey||(t.preventDefault(),e.openPresenterView())})}(e),t===h.Presenter&&X(e),t===h.Next&&function(e){const t=t=>{if(t.origin!==window.origin)return;const[n,r]=t.data.split(":");if("navigate"===n){const[t,n]=r.split(",");let a=Number.parseInt(t,10),s=Number.parseInt(n,10)+1;s>=e.fragments[a].length&&(a+=1,s=0),e.slide(a,{fragment:s})}};window.addEventListener("message",t),e.on("destroy",()=>window.removeEventListener("message",t))}(e)}}function B(e){e.on("activate",t=>{document.querySelectorAll(".bespoke-progress-bar").forEach(n=>{n.style.flexBasis=100*t.index/(e.slides.length-1)+"%"})})}const z=e=>{const t=Number.parseInt(e,10);return Number.isNaN(t)?null:t};function H(e={}){const t=Object.assign({history:!0},e);return e=>{let n=!0;const r=e=>{const t=n;try{return n=!0,e()}finally{n=t}},a=(t={fragment:!0})=>{((t,n)=>{const{fragments:r,slides:a}=e,s=Math.max(0,Math.min(t,a.length-1)),i=Math.max(0,Math.min(n||0,r[s].length-1));s===e.slide()&&i===e.fragmentIndex||e.slide(s,{fragment:i})})((z(location.hash.slice(1))||1)-1,t.fragment?z(b("f")||""):null)};e.on("fragment",({index:e,fragmentIndex:r})=>{n||w({f:0===r||r.toString()},{location:Object.assign(Object.assign({},location),{hash:"#"+(e+1)}),setter:(...e)=>t.history?history.pushState(...e):history.replaceState(...e)})}),setTimeout(()=>{a(),window.addEventListener("hashchange",()=>r(()=>{a({fragment:!1}),w({f:void 0})})),window.addEventListener("popstate",()=>{n||r(()=>a())}),n=!1},0)}}function W(e={}){const t=e.key||((e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t})(),n="bespoke-marp-sync-"+t,r=()=>{const e=y.get(n);return e?JSON.parse(e):Object.create(null)},a=e=>{const t=r(),a=Object.assign(Object.assign({},t),e(t));return y.set(n,JSON.stringify(a)),a};return a(e=>({reference:(e.reference||0)+1})),e=>{Object.defineProperty(e,"syncKey",{value:t,enumerable:!0});let s=!0;setTimeout(()=>{e.on("fragment",e=>{s&&a(()=>({index:e.index,fragmentIndex:e.fragmentIndex}))})},0),window.addEventListener("storage",t=>{if(t.key===n&&t.oldValue&&t.newValue){const n=JSON.parse(t.oldValue),r=JSON.parse(t.newValue);if(n.index!==r.index||n.fragmentIndex!==r.fragmentIndex)try{s=!1,e.slide(r.index,{fragment:r.fragmentIndex})}finally{s=!0}}}),e.on("destroy",()=>{const{reference:e}=r();void 0===e||e<=1?y.remove(n):a(()=>({reference:e-1}))})}}function J({slope:e=Math.tan(-35*Math.PI/180),swipeThreshold:t=30}={}){return n=>{let r;const a=n.parent,s=e=>{const t=a.getBoundingClientRect();return{x:e.pageX-(t.left+t.right)/2,y:e.pageY-(t.top+t.bottom)/2}};a.addEventListener("touchstart",e=>{r=1===e.touches.length?s(e.touches[0]):void 0},{passive:!0}),a.addEventListener("touchmove",e=>{if(r)if(1===e.touches.length){e.preventDefault();const t=s(e.touches[0]),n=t.x-r.x,a=t.y-r.y;r.delta=Math.sqrt(Math.pow(Math.abs(n),2)+Math.pow(Math.abs(a),2)),r.radian=Math.atan2(n,a)}else r=void 0}),a.addEventListener("touchend",a=>{if(r){if(r.delta&&r.delta>=t&&r.radian){let t=r.radian-e;t=(t+Math.PI)%(2*Math.PI)-Math.PI,n[t<0?"next":"prev"](),a.stopPropagation()}r=void 0}},{passive:!0})}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))}let G=void 0;const Q=()=>(void 0===G&&(G="wakeLock"in navigator&&navigator.wakeLock),G),Z=()=>_(void 0,void 0,void 0,(function*(){const e=Q();if(e)try{const t=yield e.request("screen");return t.addEventListener("release",()=>{console.debug("[Marp CLI] Wake Lock was released")}),console.debug("[Marp CLI] Wake Lock is active"),t}catch(e){console.warn(e)}return null}));function ee(){return _(this,void 0,void 0,(function*(){if(!Q())return;let e;const t=()=>{e&&"visible"===document.visibilityState&&Z()};return document.addEventListener("visibilitychange",t),document.addEventListener("fullscreenchange",t),e=yield Z(),e}))}const te=[h.Normal,h.Presenter,h.Next];!function(r=document.getElementById("p")){document.body.setAttribute(p,(()=>{switch(b("view")){case"next":return h.Next;case"presenter":return h.Presenter;default:return h.Normal}})());const a=(e=>{const t=b(e);return w({[e]:void 0}),t})("sync")||void 0,s=!1,l=!0,u=e(r,((...e)=>{const t=te.findIndex(e=>v()===e);if(t<0)throw new Error("Invalid view");return e.map(([e,n])=>e[t]&&n).filter(e=>e)})([[l,l,s],W({key:a})],[[l,l,l],Y(r)],[[l,l,s],c],[[l,l,l],t],[[l,s,s],o()],[[l,l,l],d],[[l,l,l],H({history:!1})],[[l,l,s],f()],[[l,l,s],i],[[l,s,s],B],[[l,l,s],J()],[[l,s,s],x()],[[l,l,l],n],[[l,l,s],ee]));window.addEventListener("beforeunload",()=>w({sync:u.syncKey})),window.addEventListener("unload",()=>u.destroy())}()}();</script><script>window.__marpCliWatchWS="ws://localhost:37717/740e4cd36b59fd40cbe6bc7c91c2670752c3961c39a0fd870c51eb78e9790594";!function(){"use strict";const e=(n,o=!1)=>{const t=new WebSocket(n);return t.addEventListener("open",()=>{console.info("[Marp CLI] Observing the change of file..."),o&&location.reload()}),t.addEventListener("close",()=>{console.warn("[Marp CLI] WebSocket for file watcher was disconnected. Try re-connecting in 5000ms..."),setTimeout(()=>e(n,!0),5e3)}),t.addEventListener("message",e=>{"reload"===e.data&&location.reload()}),t};!function(){const n=window.__marpCliWatchWS;if(n)e(n)}()}();</script></body></html>